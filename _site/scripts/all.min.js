/*jslint browser: true, fudge: true, long: true */
/*global $, blacksunplc, location */

/**
  * A module providing utility related functions.
  * @module blacksunplc/utils
  * @requires blacksunplc/objects
  * @requires blacksunplc/security
  */
(function () {
    "use strict";

    var freeze = blacksunplc.objects.freeze; // import {freeze}     from "module:blacksunplc/objects"
    var escapeHtml = blacksunplc.security.escapeHtml; // import {escapeHtml} from "module:blacksunplc/security"

    /**
     * Used in exported functions `safePath` and `safePathName`.
     * @type {!RegExp}
     */
    var SAFE_PATH = /^([\w\-]+\/)*[\w\-\.\/]+$/; // [\w] is equivalent to [A-Za-z0-9_]

    var exports = {};

    /**
     * Validates that the value of the path argument is either empty or is a valid NAME token with
     * the exception of the hash (#) and the colon (:) characters.
     * @function
     * @param {string} path - The path to be validated.
     * @return {string} A string containing path name. The path name is not
     *          percent-decoded.
     * @throws {!Error} If the path name is invalid.
     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/pathname
     * @see https://html.spec.whatwg.org/multipage/links.html#dom-hyperlink-pathname
     */
    exports.safePath = function (path) {
        if (!path || SAFE_PATH.test(path)) {
            return path;
        }
        throw new Error("Unsafe path: " + escapeHtml(path));
    };

    /**
     * Gets the window's location path name and validates that the value is
     * either empty or is a valid NAME token with the exception of the hash (#)
     * and the colon (:) characters.
     * @function
     * @return {string} A string containing path name. The path name is not
     *          percent-decoded.
     * @throws {!Error} If the path name is invalid.
     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLHyperlinkElementUtils/pathname
     * @see https://html.spec.whatwg.org/multipage/links.html#dom-hyperlink-pathname
     */
    exports.safePathName = function () {
        var path = location.pathname;
        if (!path || SAFE_PATH.test(path)) {
            return path;
        }
        throw new Error("Unsafe location.pathname");
    };

    /**
     * Checks if the the given JQuery element is in the screesn viewport.
     * @param {!jQuery}
     * @return {boolean}
     */
    exports.isOnScreen = function ($elements) {

        var $window = $(window);

        var scrollTop = /** @type {number} */ ($window.scrollTop());
        var scrollLeft = /** @type {number} */ ($window.scrollLeft());
        var windowWidth = /** @type {number} */ ($window.width());
        var windowHeight = /** @type {number} */ ($window.height());

        //var $elements = this;
        var offset = /** @type {{top: number, left: number}} */ ($elements.offset());
        var outerWidth = /** @type {number} */ ($elements.outerWidth());
        var outerHeight = /** @type {number} */ ($elements.outerHeight());

        var scrollBox = {
            "top": scrollTop,
            "right": scrollLeft + windowWidth,
            "bottom": scrollTop + windowHeight,
            "left": scrollLeft
        };

        var borderBox = {
            "top": offset.top,
            "right": offset.left + outerWidth,
            "bottom": offset.top + outerHeight,
            "left": offset.left
        };

        return !(
            scrollBox.right < borderBox.left ||
            scrollBox.left > borderBox.right ||
            scrollBox.bottom < borderBox.top ||
            scrollBox.top > borderBox.bottom
        );
    };

    /**
     * Check the screen event.
     * @return {boolean}
     */
    exports.isTouch = function () {
        try {
            document.createEvent("TouchEvent");
            return true;
        } catch (ignore) {
            return false;
        }
    };

    blacksunplc.utils = freeze(exports);

}());

/*jslint browser: true, fudge: true, long: true */
/*global $, blacksunplc, dialogPolyfill, document, location, navigator, window */

blacksunplc.events.ready(function() {
    "use strict";


    var nodes = blacksunplc.nodes; // import * as nodes     from "module:blacksunplc/nodes"
    var events = blacksunplc.events; // import * as events    from "module:blacksunplc/events"
    var security = blacksunplc.security; // import * as security  from "module:blacksunplc/security"
    var analytics = blacksunplc.analytics; // import * as analytics from "module:blacksunplc/analytics"

    if (!security.isSecureContext || security.antiClickJack()) {
        return;
    }

    analytics.setOpenExternal();
    analytics.sendPageviews();

    /**
     * Enable support for dialogs.
     * @type {!Object<function(!Element)>}
     */
    var dialogFns = {
        "showModal": function( /** !Element */ button) {
            var dialogId = button.getAttribute("aria-controls");
            var dialog = /** @type {!HTMLDialogElement} */ (document.getElementById(dialogId));
            if (!dialog.showModal) {
                dialogPolyfill.registerDialog(dialog);
            }
            dialog.showModal();
        },
        "show": function( /** !Element */ button) {
            var dialogId = button.getAttribute("aria-controls");
            var dialog = /** @type {!HTMLDialogElement} */ (document.getElementById(dialogId));
            if (!dialog.show) {
                dialogPolyfill.registerDialog(dialog);
            }
            dialog.show();
        },
        "close": function( /** !Element */ button) {
            var dialog = /** @type {!HTMLDialogElement} */ (nodes.closest(button, "dialog"));
            if (dialog) {
                if (!dialog.close) {
                    dialogPolyfill.registerDialog(dialog);
                }
                dialog.close();
            }
        }
    };

    events.add(document.body, "click", function(event) {
        var button = events.closest(event, "[data-dialog]");
        if (button) {
            var fn = dialogFns[button.getAttribute("data-dialog")];
            if (fn) {
                event.preventDefault();
                fn(button);
            }
        }
    });

    $('a').each(function() {
        var a = new RegExp('/' + window.location.host + '/');
        if (!a.test(this.href)) {
            $(this).attr("target", "_blank");
            $(this).attr("rel", "noopener noreferrer");
        }
    });

    function refreshIphone() {
        $(window).on("orientationchange", function() {
            if (!$(".video-overly").is(":visible")) {
                location.reload();
            }
        });
    }

    function detectIphoneSafari() {
        var isSafari = Boolean(navigator.userAgent.match(/Version\/[\d\.]+.*Safari/));
        var iOS = (/iPhone/).test(navigator.userAgent) && !window.MSStream;

        if (isSafari && iOS) {
            var $body = $(document.body);
            if ($body.hasClass("homepage") || $body.hasClass("sectionpage")) {
                refreshIphone();
            }
        }
    }

    detectIphoneSafari();

    function delayBeforePrintPreview(event) {
        var documentHeight = $(document).height();
        var timeout = 5000;
        var bodyClasses = ".building-a-sustainable-organisation, " +
            ".performance-overview, " +
            ".how-we-grew, " +
            ".pg-total-shareholder-return, " +
            ".how-we-manage-risks, " +
            ".twelve-month-returns, " +
            ".investor-twenty-year, " +
            ".credit-quality, " +
            ".pg-temasek-bond, " +
            ".overview-changes-in-accounting-standards, " +
            ".tr-homepage";

        if ($("#table-group-scrolling").length) {
            $("#table-group-scrolling").floatThead("destroy")
        }
        if ($("body").is(bodyClasses)) {
            event.preventDefault();

            if ($("body").hasClass("investor-twenty-year")) {
                timeout = 15000;
                documentHeight = 9999;
            }
            if ($("body").hasClass("twelve-month-returns")) {
                timeout = 8000;
            }

            $("html, body").animate({ scrollTop: documentHeight }, 3000);

            setTimeout(function() {
                window.print();
            }, timeout);
        }
    }

    function printPage() {
        $(document).keydown(function(event) {
            if (event.ctrlKey == true && (event.which === 80)) { //cntrl + p
                delayBeforePrintPreview(event);
            }
        });
    }

    printPage();

});
/*jslint browser: true, fudge: true, long: true */
/*global blacksunplc, location */

/** @module blacksunplc/sitemaps */
(function () {
    "use strict";

    var arrays = blacksunplc.arrays; // import * as arrays from "module:blacksunplc/arrays"
    var objects = blacksunplc.objects; // import * as objects from "module:blacksunplc/objects"

    var exports = {};

    /**
     * @return {boolean}
     * @throws {!Error} If the current `location.pathname` is unsafe.
     */
    exports.isZh = function () {
        var path = location.pathname;
        if (!path || (/^([\w\-]+\/)*[\w\-.\/]+$/).test(path)) {
            return (path.indexOf("/zh/") !== -1);
        }
        throw new Error("Unsafe location.pathname");
    };

    /**
     * @return {boolean}
     * @throws {!Error} If the current `location.pathname` is unsafe.
     */
    exports.isFr = function () {
        var path = location.pathname;
        if (!path || (/^([\w\-]+\/)*[\w\-.\/]+$/).test(path)) {
            return (path.indexOf("/fr/") !== -1);
        }
        throw new Error("Unsafe location.pathname");
    };

    /**
     * @return {boolean}
     * @throws {!Error} If the current `location.pathname` is unsafe.
     */
    exports.isDe = function () {
        var path = location.pathname;
        if (!path || (/^([\w\-]+\/)*[\w\-.\/]+$/).test(path)) {
            return (path.indexOf("/de/") !== -1);
        }
        throw new Error("Unsafe location.pathname");
    };

    /**
     * @return {boolean}
     * @throws {!Error} If the current `location.pathname` is unsafe.
     */
    exports.isSg = function () {
        var host = location.hostname;
        if (!host || (/^([\w\-]+\/)*[\w\-.\/]+$/).test(host)) {
            return (host.indexOf(".com.sg") !== -1 || host === "localhost" || host === "temasek-uat.blacksunplc.com" || host === "temasek-pwa-uat.blacksunplc.com");
        }
        throw new Error("Unsafe location.pathname");
    };

    /**
     * @type {!Array<{sectionName: string, href: string, sectionPages: !Array<{pageName: string, href: string}>}>}
     */
    var english = [
        {
            "sectionName": "Overview",
            "href": "/overview/",
            "sectionPages": [
                {
                    "pageName": "From Our Chairman",
                    "href": "/overview/from-our-chairman.html"
                },
                {
                    "pageName": "The Temasek Charter",
                    "href": "/overview/the-temasek-charter.html"
                },
                {
                    "pageName": "Performance Overview",
                    "href": "/overview/performance-overview.html"
                },
                {
                    "pageName": "Portfolio Highlights",
                    "href": "/overview/portfolio-highlights.html"
                },
                {
                    "pageName": "Our Financials and Portfolio",
                    "href": "/overview/our-financials-and-portfolio.html"
                },
                {
                    "pageName": "Towards a Net Zero World",
                    "href": "/overview/towards-a-net-zero-world.html"
                },
                {
                    "pageName": "<em>OneTemasek</em>: Our People",
                    "href": "/overview/onetemasek-our-people.html"
                },
                {
                    "pageName": "Uplifting Lives and Communities",
                    "href": "/overview/uplifting-lives-and-communities.html"
                },
                {
                    "pageName": "Temasek Portfolio at Inception",
                    "href": "/overview/temasek-portfolio-at-inception.html"
                }
            ]
        },
        {
            "sectionName": "Pathways To Sustainability",
            "href": "/pathways-to-sustainability/",
            "sectionPages": [
                {
                    "pageName": "Towards a Sustainable Future",
                    "href": "/pathways-to-sustainability/towards-a-sustainable-future.html"
                },
                {
                    "pageName": "Putting a Price on Carbon",
                    "href": "/pathways-to-sustainability/putting-a-price-on-carbon.html"
                },
                {
                    "pageName": "Investing for Impact and Returns",
                    "href": "/pathways-to-sustainability/investing-for-impact-and-returns.html"
                },
                {
                    "pageName": "Measuring and Tracking Portfolio Emissions",
                    "href": "/pathways-to-sustainability/measuring-and-tracking-portfolio-emissions.html"
                },
                {
                    "pageName": "Enabling a Sustainable Company",
                    "href": "/pathways-to-sustainability/enabling-a-sustainable-company.html"
                },
                {
                    "pageName": "Collaborating for Progress",
                    "href": "/pathways-to-sustainability/collaborating-for-progress.html"
                },
                {
                    "pageName": "Producing Sustainable Animal Feed",
                    "href": "/pathways-to-sustainability/producing-sustainable-animal-feed.html"
                },
                {
                    "pageName": "Building Green Ports",
                    "href": "/pathways-to-sustainability/building-green-ports.html"
                }
            ]
        },
        {
            "sectionName": "Investor",
            "href": "/investor/",
            "sectionPages": [
                {
                    "pageName": "How We Invest",
                    "href": "/investor/how-we-invest.html"
                },
                {
                    "pageName": "How We Grew",
                    "href": "/investor/how-we-grew.html"
                },
                {
                    "pageName": "Total Shareholder Return",
                    "href": "/investor/total-shareholder-return.html"
                },
                {
                    "pageName": "Investment Update",
                    "href": "/investor/investment-update.html"
                },
                {
                    "pageName": "How We Manage Risks",
                    "href": "/investor/how-we-manage-risks.html"
                },
                {
                    "pageName": "12-month Returns Simulation",
                    "href": "/investor/12-month-returns-simulation.html"
                },
                {
                    "pageName": "20-year Returns Outlook",
                    "href": "/investor/20-year-returns-outlook.html"
                }
            ]
        },
        {
            "sectionName": "Institution",
            "href": "/institution/",
            "sectionPages": [
                {
                    "pageName": "A Forward Looking Institution",
                    "href": "/institution/a-forward-looking-institution.html"
                },
                {
                    "pageName": "Financial Discipline",
                    "href": "/institution/financial-discipline.html"
                },
                {
                    "pageName": "Public Markers",
                    "href": "/institution/public-markers.html"
                },
                {
                    "pageName": "Credit Quality",
                    "href": "/institution/credit-quality.html"
                },
                {
                    "pageName": "Temasek Bonds",
                    "href": "/institution/temasek-bonds.html"
                },
                {
                    "pageName": "Wealth Added",
                    "href": "/institution/wealth-added.html"
                },
                {
                    "pageName": "Instilling Ownership",
                    "href": "/institution/instilling-ownership.html"
                },
                {
                    "pageName": "Our MERITT Values",
                    "href": "/institution/our-meritt-values.html"
                },
                {
                    "pageName": "Our <em>OneTemasek</em> Team",
                    "href": "/institution/our-onetemasek-team.html"
                },
                {
                    "pageName": "Our Temasek Heartbeat",
                    "href": "/institution/our-temasek-heartbeat.html"
                },
                {
                    "pageName": "Board of Directors",
                    "href": "/institution/board-of-directors.html"
                },
                {
                    "pageName": "Senior Management",
                    "href": "/institution/senior-management.html"
                }
            ]
        },
        {
            "sectionName": "Steward",
            "href": "/steward/",
            "sectionPages": [
                {
                    "pageName": "A Trusted Steward",
                    "href": "/steward/a-trusted-steward.html"
                },
                {
                    "pageName": "Enabling a Better World",
                    "href": "/steward/enabling-a-better-world.html"
                },
                {
                    "pageName": "Making a Difference",
                    "href": "/steward/making-a-difference.html"
                },
                {
                    "pageName": "Touching Lives",
                    "href": "/steward/touching-lives.html"
                },
                {
                    "pageName": "Rising Above COVID-19",
                    "href": "/steward/rising-above-covid-19.html"
                },
                {
                    "pageName": "Fostering Stewardship and Governance",
                    "href": "/steward/fostering-stewardship-and-governance.html"
                },
                {
                    "pageName": "Sharing Perspectives",
                    "href": "/steward/sharing-perspectives.html"
                }
            ]
        },
        {
            "sectionName": "Our Stories",
            "href": "/our-stories/",
            "sectionPages": [
                {
                    "category": "investor",
                    "pages": [
                        {
                            "pageName": "China's Gen Z: ‘Next Normal’ Consumers",
                            "href": "/our-stories/chinas-gen-z-next-normal-consumers.html",
                            "image": "/images/menu/our-stories/thumb-2.jpg"
                        },
                        {
                            "pageName": "The Race Against the Clock to Net Zero",
                            "href": "/our-stories/the-race-against-the-clock-to-net-zero.html",
                            "image": "/images/menu/our-stories/thumb-1.jpg"
                        }
                    ]
                }, {
                    "category": "institution",
                    "pages": [
                        {
                            "pageName": "Paying it Forward by Mentoring",
                            "href": "/our-stories/paying-it-forward-by-mentoring.html",
                            "image": "/images/menu/our-stories/thumb-3.jpg"
                        }
                    ]
                }, {
                    "category": "steward",
                    "pages": [
                        {
                            "pageName": "Swabs and Scrubs: A COVID-19 Response",
                            "href": "/our-stories/swabs-and-scrubs-a-covid-19-response.html",
                            "image": "/images/menu/our-stories/thumb-4.jpg"
                        },
                        {
                            "pageName": "Racing Against COVID-19 to Save Lives",
                            "href": "/our-stories/racing-against-covid-19-to-save-lives.html",
                            "image": "/images/menu/our-stories/thumb-5.jpg"
                        }
                    ]
                }
            ]
        },
        {
            "sectionName": "Our Major Investments",
            "href": "/our-major-investments/",
            "sectionPages": [
                {
                    "pageName": "Financial Services",
                    "href": "/our-major-investments/financial-services.html"
                },
                {
                    "pageName": "Telecommunications, Media & Technology",
                    "href": "/our-major-investments/telecommunications-media-and-technology.html"
                },
                {
                    "pageName": "Transportation & Industrials",
                    "href": "/our-major-investments/transportation-and-industrials.html"
                },
                {
                    "pageName": "Consumer & Real Estate",
                    "href": "/our-major-investments/consumer-and-real-estate.html"
                },
                {
                    "pageName": "Life Sciences & Agri-Food",
                    "href": "/our-major-investments/life-sciences-and-agri-food.html"
                }
            ]
        },
        {
            "sectionName": "Group Financials",
            "href": "/group-financials/",
            "sectionPages": [
                {
                    "pageName": "Adopting International Accounting Standards",
                    "href": "/group-financials/adopting-international-accounting-standards.html"
                },
                {
                    "pageName": "Group Financial Summary",
                    "href": "/group-financials/group-financial-summary.html"
                }, {
                    "pageName": "Statement by Auditors",
                    "href": "/group-financials/statement-by-auditors.html"
                },
                {
                    "pageName": "Statement by Directors",
                    "href": "/group-financials/statement-by-directors.html"
                },
                {
                    "pageName": "Group Income Statements",
                    "href": "/group-financials/group-income-statements.html"
                },
                {
                    "pageName": "Group Balance Sheets",
                    "href": "/group-financials/group-balance-sheets.html"
                },
                {
                    "pageName": "Group Cash Flow Statements",
                    "href": "/group-financials/group-cash-flow-statements.html"
                },
                {
                    "pageName": "Group Statements of Changes in Equity",
                    "href": "/group-financials/group-statements-of-changes-in-equity.html"
                }
            ]
        },
        {
            "sectionName": "Media Centre",
            "href": "/media-centre/",
            "sectionPages": [
                {
                    "pageName": "Chart Centre",
                    "href": "/media-centre/chart-centre.html"
                },
                {
                    "pageName": "Videos",
                    "href": "/media-centre/videos.html"
                },
                {
                    "pageName": "Downloads",
                    "href": "/media-centre/downloads.html"
                }
            ]
        }
    ];

    /**
     * @type {!Array<{sectionName: string, href: string, sectionPages: !Array<{pageName: string, href: string}>}>}
     */
    var chinese = [
        {
            "sectionName": "概览",
            "href": "/zh/overview/",
            "sectionPages": [
                {"pageName": "董事长报告",
                    "href": "/zh/overview/from-our-chairman.html"},
                {"pageName": "淡马锡宪章",
                    "href": "/zh/overview/the-temasek-charter.html"},
                {"pageName": "业绩概览",
                    "href": "/zh/overview/performance-overview.html"},
                {"pageName": "投资组合摘要",
                    "href": "/zh/overview/portfolio-highlights.html"},
                {"pageName": "淡马锡财务概要和投资组合",
                    "href": "/zh/overview/our-financials-and-portfolio.html"},
                {"pageName": "迈向净零碳排放的世界",
                    "href": "/zh/overview/towards-a-net-zero-world.html"},
                {"pageName": "淡马锡大家庭：我们的员工",
                    "href": "/zh/overview/onetemasek-our-people.html"},
                {"pageName": "帮扶生命和社群",
                    "href": "/zh/overview/uplifting-lives-and-communities.html"},
                {"pageName": "淡马锡成立时的投资组合",
                    "href": "/zh/overview/temasek-portfolio-at-inception.html"}
            ]
        },
        {
            "sectionName": "通向可持续发展之路",
            "href": "/zh/pathways-to-sustainability/",
            "sectionPages": [
                {"pageName": "塑造可持续的未来",
                    "href": "/zh/pathways-to-sustainability/towards-a-sustainable-future.html"},
                {"pageName": "制定碳价",
                    "href": "/zh/pathways-to-sustainability/putting-a-price-on-carbon.html"},
                {"pageName": "投资以实现影响力与回报",
                    "href": "/zh/pathways-to-sustainability/investing-for-impact-and-returns.html"},
                {"pageName": "测量和追踪投资组合排放量",
                    "href": "/zh/pathways-to-sustainability/measuring-and-tracking-portfolio-emissions.html"},
                {"pageName": "构建可持续的机构",
                    "href": "/zh/pathways-to-sustainability/enabling-a-sustainable-company.html"},
                {"pageName": "共谋发展",
                    "href": "/zh/pathways-to-sustainability/collaborating-for-progress.html"},
                {"pageName": " 生产可持续动物饲料",
                    "href": "/zh/pathways-to-sustainability/producing-sustainable-animal-feed.html"},
                {"pageName": "打造绿色港口",
                    "href": "/zh/pathways-to-sustainability/building-green-ports.html"}
            ]
        },
        {
            "sectionName": "投资者",
            "href": "/zh/investor/",
            "sectionPages": [
                {"pageName": "投资理念与策略",
                    "href": "/zh/investor/how-we-invest.html"},
                {"pageName": "成长历程",
                    "href": "/zh/investor/how-we-grew.html"},
                {"pageName": "股东总回报",
                    "href": "/zh/investor/total-shareholder-return.html"},
                {"pageName": "投资动态",
                    "href": "/zh/investor/investment-update.html"},
                {"pageName": "管理风险",
                    "href": "/zh/investor/how-we-manage-risks.html"},
                {"pageName": "未来12个月投资组合回报模拟",
                    "href": "/zh/investor/12-month-returns-simulation.html"},
                {"pageName": "20年期投资组合回报展望",
                    "href": "/zh/investor/20-year-returns-outlook.html"}
            ]
        },
        {
            "sectionName": "机构",
            "href": "/zh/institution/",
            "sectionPages": [
                {"pageName": "着眼未来的机构",
                    "href": "/zh/institution/a-forward-looking-institution.html"},
                {"pageName": "财务自律原则",
                    "href": "/zh/institution/financial-discipline.html"},
                {"pageName": "公开衡量指标",
                    "href": "/zh/institution/public-markers.html"},
                {"pageName": "信用质量",
                    "href": "/zh/institution/credit-quality.html"},
                {"pageName": "淡马锡债券",
                    "href": "/zh/institution/temasek-bonds.html"},
                {"pageName": "财富增值",
                    "href": "/zh/institution/wealth-added.html"},
                {"pageName": "共享共担",
                    "href": "/zh/institution/instilling-ownership.html"},
                {"pageName": "我们的MERITT价值观",
                    "href": "/zh/institution/our-meritt-values.html"},
                {"pageName": "淡马锡大家庭",
                    "href": "/zh/institution/our-onetemasek-team.html"},
                {"pageName": "淡马锡脉动",
                    "href": "/zh/institution/our-temasek-heartbeat.html"},
                {"pageName": "董事会",
                    "href": "/zh/institution/board-of-directors.html"},
                {"pageName": "高级管理层",
                    "href": "/zh/institution/senior-management.html"}
            ]
        },
        {
            "sectionName": "资产管护者",
            "href": "/zh/steward/",
            "sectionPages": [
                {"pageName": "备受信赖的资产管护者",
                    "href": "/zh/steward/a-trusted-steward.html"},
                {"pageName": "美好世界的承诺",
                    "href": "/zh/steward/enabling-a-better-world.html"},
                {"pageName": "造福社会",
                    "href": "/zh/steward/making-a-difference.html"},
                {"pageName": "温暖心灵",
                    "href": "/zh/steward/touching-lives.html"},
                {"pageName": "同心协力共克疫情",
                    "href": "/zh/steward/rising-above-covid-19.html"},
                {"pageName": "强化资产管护和治理",
                    "href": "/zh/steward/fostering-stewardship-and-governance.html"},
                {"pageName": "集思广益",
                    "href": "/zh/steward/sharing-perspectives.html"}
            ]
        },
        {
            "sectionName": "我们的故事",
            "href": "/our-stories/",
            "sectionPages": [
                {
                    "category": "investor",
                    "pages": [
                        {
                            "pageName": "中国Z世代：“新常态”消费者",
                            "href": "/zh/our-stories/chinas-gen-z-next-normal-consumers.html",
                            "image": "/images/menu/our-stories/thumb-2.jpg"
                        },
                        {
                            "pageName": "与时间赛跑，实现净零碳排放",
                            "href": "/zh/our-stories/the-race-against-the-clock-to-net-zero.html",
                            "image": "/images/menu/our-stories/thumb-1.jpg"
                        }
                    ]
                }, {
                    "category": "institution",
                    "pages": [
                        {
                            "pageName": "分享智慧，继往开来",
                            "href": "/zh/our-stories/paying-it-forward-by-mentoring.html",
                            "image": "/images/menu/our-stories/thumb-3.jpg"
                        }
                    ]
                }, {
                    "category": "steward",
                    "pages": [
                        {
                            "pageName": "拭子检测：迅速应对，抗击疫情",
                            "href": "/zh/our-stories/swabs-and-scrubs-a-covid-19-response.html",
                            "image": "/images/menu/our-stories/thumb-4.jpg"
                        },
                        {
                            "pageName": "争分夺秒，挽救生命",
                            "href": "/zh/our-stories/racing-against-covid-19-to-save-lives.html",
                            "image": "/images/menu/our-stories/thumb-5.jpg"
                        }
                    ]
                }
            ]
        },
        {
            "sectionName": "我们的主要投资",
            "href": "/zh/our-major-investments/",
            "sectionPages": [
                {"pageName": "金融服务",
                    "href": "/zh/our-major-investments/financial-services.html"},
                {"pageName": "电信、媒体与科技",
                    "href": "/zh/our-major-investments/telecommunications-media-and-technology.html"},
                {"pageName": "交通与工业",
                    "href": "/zh/our-major-investments/transportation-and-industrials.html"},
                {"pageName": "消费与房地产",
                    "href": "/zh/our-major-investments/consumer-and-real-estate.html"},
                {"pageName": "生命科学与农业食品",
                    "href": "/zh/our-major-investments/life-sciences-and-agri-food.html"}
            ]
        },
        {
            "sectionName": "集团财务",
            "href": "/zh/group-financials/",
            "sectionPages": [
                {"pageName": "采用国际会计准则",
                    "href": "/zh/group-financials/adopting-international-accounting-standards.html"},
                {"pageName": "集团财务概要",
                    "href": "/zh/group-financials/group-financial-summary.html"},
                {"pageName": "审计师声明",
                    "href": "/zh/group-financials/statement-by-auditors.html"},
                {"pageName": "董事声明",
                    "href": "/zh/group-financials/statement-by-directors.html"},
                {"pageName": "集团损益表",
                    "href": "/zh/group-financials/group-income-statements.html"},
                {"pageName": "集团资产负债表",
                    "href": "/zh/group-financials/group-balance-sheets.html"},
                {"pageName": "集团现金流量表",
                    "href": "/zh/group-financials/group-cash-flow-statements.html"},
                {"pageName": "集团股东权益变动表",
                    "href": "/zh/group-financials/group-statements-of-changes-in-equity.html"}
            ]
        },
        {
            "sectionName": "媒体中心",
            "href": "/zh/media-centre/",
            "sectionPages": [
                {"pageName": "图表中心",
                    "href": "/zh/media-centre/chart-centre.html"},
                {"pageName": "视频",
                    "href": "/zh/media-centre/videos.html"},
                {"pageName": "下载",
                    "href": "/zh/media-centre/downloads.html"}
            ]
        }
    ];

    /**
     * @type {!Array<{sectionName: string, href: string, sectionPages: !Array<{pageName: string, href: string}>}>}
     */
    var fr = [
        {
            "sectionName": "De notre Président",
            "href": "#chairman",
            "sectionPages": []
        }, {
            "sectionName": "Construire un portefeuille résilient et tourné vers l’avenir",
            "href": "#building",
            "sectionPages": []
        }, {
            "sectionName": "Créer de la valeur durable sur le long terme",
            "href": "#delivering",
            "sectionPages": []
        }, {
            "sectionName": "Grandir au rythme d'un monde en transformation",
            "href": "#growing",
            "sectionPages": []
        }, {
            "sectionName": "Un Investisseur Générationnel avec une présence mondiale",
            "href": "#generational",
            "sectionPages": []
        }, {
            "sectionName": "Un Portefeuille Diversifié pour un rendement à long terme",
            "href": "#diverse",
            "sectionPages": []
        }, {
            "sectionName": "Une Institution Générationnelle, solide, et disciplinée",
            "href": "#robust",
            "sectionPages": []
        }, {
            "sectionName": "Investisseur, Institution, Gestionnaire",
            "href": "#investor-institution-steward",
            "sectionPages": []
        }
    ];

    /**
     * @type {!Array<{sectionName: string, href: string, sectionPages: !Array<{pageName: string, href: string}>}>}
     */
    var de = [
        {
            "sectionName": "Von Unserem Chairman",
            "href": "#chairman",
            "sectionPages": []
        }, {
            "sectionName": "Aufbau eines stabilen, langfristig ausgerichteten Portfolios",
            "href": "#building",
            "sectionPages": []
        }, {
            "sectionName": "Nachhaltige Wertschöpfung mit langfristiger Perspektive",
            "href": "#delivering",
            "sectionPages": []
        }, {
            "sectionName": "Im Einklang mit einer sich wandelnden Welt wachsen",
            "href": "#growing",
            "sectionPages": []
        }, {
            "sectionName": "Generationenübergreifender investor mit globaler Ausrichtung",
            "href": "#generational",
            "sectionPages": []
        }, {
            "sectionName": "Ein breit diversifiziertes Portfolio für nachhaltige Renditen",
            "href": "#diverse",
            "sectionPages": []
        }, {
            "sectionName": "Eine robuste und disziplinierte Institution über Generationen",
            "href": "#robust",
            "sectionPages": []
        }, {
            "sectionName": "Investor, Institution, Partner",
            "href": "#investor-institution-steward",
            "sectionPages": []
        }
    ];

    /**
     * Gets the sitemap sections for the current page's language.
     * @return {!Array<{sectionName: string, href: string, sectionPages: !Array<{pageName: string, href: string}>}>}
     * @throws {!Error} If the current `location.pathname` is unsafe.
     */
    exports.getLangSections = function () {
        if (exports.isSg()) {
            if (exports.isZh()) {
                return chinese;
            } else if (exports.isFr()) {
                return fr;
            } else if (exports.isDe()) {
                return de;
            }
            return english;

        }
        arrays.forEach(chinese, function(section) {
            section.href = section.href.replace("/zh", "");
            arrays.forEach(section.sectionPages, function(page) {
                if (page.href) {
                    page.href = page.href.replace("/zh", "");
                }
            });
        });
        return chinese;

    };

    blacksunplc.sitemaps = objects.freeze(exports);

}());

/*jslint browser: true, fudge: true, long: true */
/*global $, MutationObserver, blacksunplc, document, is, navigator, parseFloat, setInterval, setTimeout, window */

/** @module blacksunplc/menu */
(function() {
    "use strict";

    var objects = blacksunplc.objects; // import * as objects  from "module:blacksunplc/objects"
    var sitemaps = blacksunplc.sitemaps; // import * as sitemaps from "./sitemaps-eng-zh.js"
    var utils = blacksunplc.utils; // import * as utils    from "./utils.js"

    var exports = {};
    /** Deactivates navigation. */
    exports.closeMenu = function() {
        var $body = $(document.body);
        if ($body.hasClass("navigation-active")) {
            $("button.hamburger").toggleClass("is-active");
            $body.toggleClass("navigation-active");
        }
    };

    /**
     * @param {!jQuery} $buttons
     */
    exports.clickMenuButton = function($buttons) {
        /* IE 11 safe. */
        var $toggleList = $buttons.siblings("ul");
        var $parentSiblings = $buttons.parent().siblings();
        var $activeButton = $("button.active", $parentSiblings);

        if ($activeButton.length > 0) {
            var $activeList = $activeButton.siblings("ul");

            $activeList.css("max-height", "0");
            $activeButton.toggleClass("active");
        }

        if ($buttons.hasClass("active")) {
            $toggleList.css("max-height", "0");
        } else {
            $toggleList.css("max-height", $toggleList[0].scrollHeight + 10 + "px");
        }
        $buttons.toggleClass("active");
    };

    /**
     * @param {null} changeToStr - Note Why bother with this parameter?
     * @param {(string|null)} reqHref
     */
    exports.menuHashChange = function(changeToStr, reqHref) {

        var $activeA = $(".main-navigation a.active");
        var $activeBtn = $(".main-navigation button.active");

        var $requestedA;
        if (reqHref !== null) {
            $requestedA = $(".main-navigation a[href='" + reqHref + "']");
        } else {
            $requestedA = $(".main-navigation span:contains('" + changeToStr + "')").parent();
        }

        var $requestedButtons = $requestedA.parent().parent().siblings("button");

        if ($activeBtn[0] !== $requestedButtons[0]) {
            exports.clickMenuButton($requestedButtons);
        }

        if ($activeA[0] !== $requestedA[0]) {
            $activeA.removeClass("active");
            $requestedA.addClass("active");
        }
    };

    /** Deactivates any active navigation anchors. */
    exports.deactivateMenuCurr = function() {
        $(".main-navigation a.active").removeClass("active");
    };

    /** Detect location href and switch the language menu link state. */
    exports.initializeLanguageState = function() {

        var $englishAnchors = $(".header-links li a").eq(0).add($(".mobile-links li a").eq(0));
        var $chineseAnchors = $("a", $(".header-links li").eq(1)).add($("a", $(".mobile-links li").eq(1)));

        var currPath = utils.safePathName();

        if (sitemaps.isSg()) {
            if (sitemaps.isZh()) {
                $englishAnchors.removeClass("current");
                $chineseAnchors.addClass("current");

                $englishAnchors.attr("href", currPath.slice(3)); // slice after "/zh"

                var href = /** @type {string} */ ($(".header-download-link").attr("href"));
                $(".header-download-link").attr("href", href);
            } else if (!(sitemaps.isFr() || sitemaps.isDe())) {
                if (currPath === "/not-found.html") {
                    currPath = "";
                }
                $chineseAnchors.attr("href", "/zh" + currPath);
            }
        } else {
            $englishAnchors.parent().remove();
            $chineseAnchors.parent().remove();
        }
    };

    blacksunplc.menu = objects.freeze(exports);

}());

(function() {
    "use strict";

    var arrays = blacksunplc.arrays; // import * as arrays        from "module:blacksunplc/arrays"
    var events = blacksunplc.events; // import * as events        from "module:blacksunplc/events"
    var functions = blacksunplc.functions; // import * as functions     from "module:blacksunplc/functions"
    var cookieconsent = blacksunplc.cookieconsent; // import * as cookieconsent from "./cookieconsent-tr.js"
    var sitemaps = blacksunplc.sitemaps; // import * as sitemaps      from "./sitemaps-eng-zh.js"
    var utils = blacksunplc.utils; // import * as utils         from "./utils.js"
    var menu = blacksunplc.menu; // import * as menu          from "./menu.js"

    /**
     * @param {!jQuery} $navList
     * @param {?jQuery} $activeBtn
     */
    function populateMenu($navList, $activeBtn) {
        $("nav").append($navList);
        navigation();

        if ($activeBtn !== null) {
            menu.clickMenuButton($activeBtn);
        }
    }

    function getMenuItems() {

        var sections = sitemaps.getLangSections();
        var $navList = $("<ul></ul>");
        var path = utils.safePathName();

        /* Strip the version of any version rewritten URLs */
        var sectionUri = path.replace(/\/version[1-90]+(?:[a-z]?)/, "");
        if (sectionUri.indexOf("/") !== sectionUri.lastIndexOf("/")) {
            sectionUri = sectionUri.substring(path.indexOf("/") + 1, sectionUri.lastIndexOf("/"));
        } else {
            sectionUri = "";
        }

        var $activeBtn = null;
        var sectionHref;

        arrays.forEach(sections, function(section, index) {

            if (section.href) {
                /* Strip the version of any version rewritten URLs */
                sectionHref = section.href.replace(/\/version[1-90]+(?:[a-z]?)/, "");
            }
            /* `sectionId` is used to construct a CSS class name among other things */
            var sectionId = sectionHref.replace(/\//g, ""); // drop any forward slashes

            var $li = section.sectionName == "Our Stories" || section.sectionName === "我们的故事" ? $("<li class='stories'></li>") : $("<li></li>");
            var $anchor = $("<a><span itemProp='name'>" + section.sectionName + "</span></a>");

            $navList.append($li.append($anchor));

            if (sectionHref === "/our-stories/index.html") {
                $anchor.addClass("globe-icon");
            }

            /* Use the original value of section.href, not the possibly stripped sectionHref */
            $anchor.attr({
                "href": section.href,
                "itemprop": "url"
            });

            if (section.sectionPages.length > 1) {
                $anchor.addClass("has-children");

                var $btn = $("<button type='button'><span class='tr-icon arrow-open-up-after'></span></button>");
                $btn.addClass("menu-btn-" + index + " " + sectionId + "-menu-btn");
                $li.append($btn);
                var $sPagesList;
                if (section.sectionName == "Our Stories" || section.sectionName === "我们的故事") {
                    $sPagesList = $("<ul class='stories'></ul>");
                } else if (section.sectionName == "Group Financials" || section.sectionName === "集团财务") {
                    $sPagesList = $("<ul class='group-financials-menu-items'></ul>");
                } else {
                    $sPagesList = $("<ul></ul>");
                }

                $li.append($sPagesList);

                if ($(document.documentElement).attr("lang") === "zh") {
                    if (sectionHref.replace("/zh/", "").replace(/\//g, "") === sectionUri.replace("zh/", "")) {
                        $activeBtn = $btn;
                    }
                } else if (sectionHref.replace(/\//g, "") === sectionUri) {
                    $activeBtn = $btn;
                }

                if (section.sectionName == "Our Stories" || section.sectionName === "我们的故事") {
                    var $categorySection = $("<li></li>");

                    $sPagesList.append($categorySection);

                    arrays.forEach(section.sectionPages, function(sectionPage) {
                        var count = sectionPage.pages.length === 1 ? "single" : "",
                            $subPagesList = $("<ul class='menu-thumb " + sectionPage.category + " " + count + "'></ul>");

                        $categorySection.append($subPagesList);

                        arrays.forEach(sectionPage.pages, function(pages) {

                            var activeStr;
                            if (path === pages.href) {
                                activeStr = " class='active'"; // the active menu will be expanded
                            } else {
                                activeStr = "";
                            }
                            var itemName = pages.pageName;

                            var $listItem = $("<li></li>");

                            $subPagesList.append($listItem);

                            $listItem.append("<a href='" + pages.href + "'" + activeStr + " itemprop='url' class='img-container'><img src='" + pages.image + "' alt='" + itemName + "' loading='lazy'></a>");

                            $listItem.append("<a href='" + pages.href + "'" + activeStr + " itemprop='url'><span itemprop='name'>" + itemName + "</span></a>");
                        });

                    });
                } else {
                    arrays.forEach(section.sectionPages, function(sectionPage) {

                        //                    console.log('path=' + path + ', sectionPage.href=' + sectionPage.href);

                        var activeStr;
                        if (path === sectionPage.href) {
                            activeStr = " class='active'"; // the active menu will be expanded
                        } else {
                            activeStr = "";
                        }
                        var itemName = sectionPage.pageName;
                        //                    itemName = sectionPage.pageName.replace(/\</g, "&lt;").replace(/\>/g, "&gt;").replace(/\"/g, "&quot;").replace(/&/g, "&amp;");

                        $sPagesList.append($("<li><a href='" + sectionPage.href + "'" + activeStr + " itemprop='url'><span itemprop='name'>" + itemName + "</span></a></li>"));
                    });
                }

            }
        });

        populateMenu($navList, $activeBtn);
        // cookieconsent.addNavNotice();
    }

    /* Workaround for Safari on iPad where viewport is shortened by the address bar and tabs */
    var windowInnerHeight = /** @type {number} */ ($(window).innerHeight());
    var viewportHeight = windowInnerHeight - 57;

    /** @param {number} height */
    function setHeightOfMenuSafariIpad(height) {
        $(".navigation-active .main-navigation").css({
            "height": height + "px"
        });
    }

    function detectViewportHeightChangeSafari() {
        var isIpad = navigator.userAgent.match(/iPad/i) !== null;
        var isSafari = (
            /* Detection for Safari 3 to 9.1.3 */
            (/constructor/i).test(window.HTMLElement) ||
            /* Detection for Safari 10, but maybe not Safari 11+ */
            (
                window.safari &&
                window.safari.pushNotification &&
                window.safari.pushNotification.toString() === "[object SafariRemoteNotification]"
            )
        );
        if (!isSafari || !isIpad) {
            return;
        }
        $(".main-header .hamburger").on("click", function() {
            setHeightOfMenuSafariIpad(viewportHeight);
        });
        setInterval(function() {
            var windowInnerHeight2 = /** @type {number} */ ($(window).innerHeight());
            var newViewportHeight = windowInnerHeight2 - 57;
            if (newViewportHeight === viewportHeight) {
                return;
            }
            viewportHeight = newViewportHeight;
            setHeightOfMenuSafariIpad(viewportHeight);
        }, 1000);
    }

    detectViewportHeightChangeSafari();

    function navigation() {

        /** Manually set - mobile viewport height workaround. */
        function menuHeightMobile() {
            var windowHeight = window.innerHeight;
            $(".main-navigation > ul").css("max-height", windowHeight - 119);
        }

        menuHeightMobile();

        $(".main-header .hamburger").on("click", function( /** !jQuery.Event */ event) {
            // cookieconsent.dismiss();
            $(event.currentTarget).toggleClass("is-active");
            $(document.body).toggleClass("navigation-active");
            setInterval(menuHeightMobile, 500);
        });

        /** @param {!Element} anchor */
        function hoverMenuItem(anchor) {
            var $currList = $(anchor).parent().parent();

            if ($currList.siblings("button").hasClass("active")) {
                var deltaH = $currList[0].scrollHeight - parseFloat($currList.css("max-height"));

                if (deltaH > 0) {
                    $currList.css("max-height", $currList[0].scrollHeight + 20 + "px");
                }
            }
        }

        //         function menuHeight() {
        //             var $mainNav = $(".main-navigation");
        //             var offset = $(".main-header").outerHeight() + $mainNav.outerHeight() - $mainNav.height();
        //
        //             $(".main-navigation > ul").css({"max-height": window.innerHeight - offset});
        //         }
        //
        //         menuHeight();
        //
        //         $(window).on("resize", function () {
        //             menuHeight();
        //         });

        $(".main-navigation > ul > li > button").on("click", function( /** !jQuery.Event */ event) {
            menu.clickMenuButton($(event.currentTarget));
        });
        $(".main-navigation > ul > li > a").on("click", function(event) {
            if (!(sitemaps.isFr() || sitemaps.isDe())) {
                event.preventDefault();
                menu.clickMenuButton($(event.currentTarget).next("button"));
            }
        });
        $(".main-navigation > ul > li > a + button + ul > li a").on("mouseenter", function( /** !jQuery.Event */ event) {
            var anchor = event.currentTarget;
            hoverMenuItem(anchor);
        });

        $("main").on("click", menu.closeMenu);

        //        /* Double click functionality left in case required in future. */
        //        $(".main-navigation > ul > li > a").on("click", function (/** !jQuery.Event */ event) {
        //            var $link =  $(event.currentTarget);
        //            var $buttons = $link.siblings("button");
        //
        //            if ($link.parent().hasClass("shaping-icon")) {
        //                return;
        //            }
        //
        //            if (!$buttons.hasClass("active")) {
        //                event.preventDefault();
        //            }
        //
        //            menu.clickMenuButton($buttons);
        //        });
    }

    function initializeSiteFooter() {
        var $footer = $("footer").first();
        var $document = $(document);
        var $window = $(window);

        var documentHeight = /** @type {number} */ ($document.height());
        var windowHeight = /** @type {number} */ ($window.height());
        var footerHeight = /** @type {number} */ ($footer.height());

        $(window).on("resize", function() {
            documentHeight = /** @type {number} */ ($document.height());
            windowHeight = /** @type {number} */ ($window.height());
            footerHeight = /** @type {number} */ ($footer.height());

            /* iPad new window from share link (on closing) offsets fullpage window hack. */
            setTimeout(function() {
                var scrollTop = /** @type {number} */ ($window.scrollTop());
                if (is.ipad() && is.safari() && scrollTop < 0) {
                    $window.scrollTop(0);
                }
            }, 500);
        });

        $window.on("scroll", function( /** !jQuery.Event */ event) {
            if (
                (document.activeElement && document.activeElement.className === "search-text") ||
                ($(document.body).hasClass("navigation-active") && (is.iphone() || is.androidPhone()))
            ) {
                /* Prevent mobile scroll on search input focus/nav open. */
                event.preventDefault();
                return;
            }

            menu.closeMenu();

            var scrollTop = /** @type {number} */ ($window.scrollTop());
            if (!$footer.hasClass("visible") && (windowHeight + scrollTop + (footerHeight / 2) > documentHeight)) {
                $footer.addClass("visible");
            }
        });

        $window.on("load", function() {
            var scrollTop = /** @type {number} */ ($window.scrollTop());
            if (!$footer.hasClass("visible") && (windowHeight + scrollTop + (footerHeight / 2) > documentHeight)) {
                $footer.addClass("visible");
            }
        })

        //        $(document.body).on("touchmove", function (/** !jQuery.Event */ event) {
        //            if (document.activeElement.className == "search-text" && /iPhone/.test(navigator.userAgent)) {
        //                /* Prevent iPhone scroll on search input focus. */
        //                event.preventDefault();
        //                return;
        //            }
        //        })
    }

    /** @return {boolean} */
    function hasTouchEvents() {
        try {
            document.createEvent("TouchEvent");
            return true;
        } catch (ignore) {
            return false;
        }
    }

    function initializeTooltips() {

        var $tooltips = $(".tooltip");
        if (!$tooltips.length) {
            return;
        }

        var activateTooltipster = true; // conditionally modified below

        var tooltipsterOptions = {
            "interactive": true,
            "contentAsHTML": true,
            "maxWidth": 300,
            "contentCloning": true,
            "trigger": "custom",
            "triggerOpen": {
                "mouseenter": true, // conditionally modified below
                "tap": true,
                "click": true
            },
            "triggerClose": {
                "click": true,
                "mouseleave": true, // conditionally modified below
                "scroll": true, // conditionally modified below
                "tap": true
            }
        };

        if (activateTooltipster) {
            $tooltips.tooltipster(tooltipsterOptions);
        }
    }

    var isVisible;

    function showIfNeeded() {
        var scrollTop = /** @type {number} */ ($(window).scrollTop());
        if (scrollTop > 300) {
            isVisible = true;
            $(".back-to-top").addClass("back-to-top--visible");
        }
    }

    function backToTop() {
        isVisible = false;
        showIfNeeded();

        $(window).one("load", function() {
            $(".scroll-content").on("scroll", function() {
                $(".back-to-top").addClass("back-to-top--visible");
            });
        });
    }

    if ($(document.body).hasClass("back-to-top-required")) {
        backToTop();
    }

    function listener() {
        if (!isVisible) {
            showIfNeeded();
        }
    }

    /* Debounced to run at most once per 100 milliseconds. */
    events.add(window, "scroll", functions.debounce(listener, 100));

    events.ready(function() {

        getMenuItems();
        //        navigation;

        //        initializeSiteFooter();

        initializeTooltips();
        menu.initializeLanguageState();

        //        /* The Lengend of the reordering function lies here. */
        //        var $namelist = $(".name-list .row .col-namelist");
        //        console.log($namelist.length)
        //        $namelist.detach()
        //
        //        console.log($namelist)
        //
        //        $namelist.slice(0, 24).each(function (index, name) {
        //            var $name = $(name);
        //            $(".name-list .row").eq(index).append($name);
        //        });
        //
        //        $namelist.slice(25, 49).each(function (index, name) {
        //            var $name = $(name);
        //            $(".name-list .row").eq(index).append($name);
        //        });
        //
        //        $namelist.slice(50, 75).each(function (index, name) {
        //            var $name = $(name);
        //            $(".name-list .row").eq(index).append($name);
        //        });

        var carouselSlides = document.querySelector(".carousel-slides");
        if (carouselSlides && window.MutationObserver) {
            /* Browser compatibility: Internet Explorer 11+ */

            /*
             * An ugly hack to detect the first time some other script modifies
             * the "class" attribute of the ".carousel-slides" element.
             */
            var observer = new MutationObserver(function(mutations) {
                var classAttrMutations = mutations.filter(function(mutation) {
                    return mutation.attributeName === "class";
                });
                if (classAttrMutations.length > 0) {
                    observer.disconnect();
                    initializeSiteFooter();
                }
            });
            observer.observe(carouselSlides, { "attributes": true });

        } else {
            initializeSiteFooter();
        }

    });

}());
window.gaScrollTrigger = {

    "_enabled": false,
    "_counters": [],

    "resetTrigger": function(id) {
        window.gaScrollTrigger._counters[id] = null;
    },
    "trigger": function(percent, id) {

        if (!window.gaScrollTrigger._enabled) {
            return;
        }

        if (id == null) {
            id = "_default";
        }

        percent = Math.min(100, Math.max(0, percent));

        var cCounter = window.gaScrollTrigger._counters[id];
        if (cCounter == null) {
            cCounter = {
                "id": id,
                "maxScroll": 0,
                "maxTriggered": 0
            };

            window.gaScrollTrigger._counters[id] = cCounter;
        }

        if (percent > cCounter.maxScroll) {

            cCounter.maxScroll = percent;

            var toTrigger = Math.floor(percent / 25) * 25;
            if (toTrigger > cCounter.maxTriggered) {
                cCounter.maxTriggered = toTrigger;

                if (typeof ga !== "undefined") {

                    ga("gtm1.send", {
                        "hitType": "event",
                        "eventCategory": location.pathname,
                        "eventAction": "Scroll Depth",
                        "eventLabel": cCounter.maxTriggered
                    });
                }
            }
        }

    }
};

(function(w, d, s, l, sg, cn, sitemaps) {
    var id = sitemaps.isSg() ? sg : cn;
    w[l] = w[l] || []; w[l].push({"gtm.start":
        new Date().getTime(),
    "event": "gtm.js"});
    var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != "dataLayer" ? "&l=" + l : "";
    j.async = true; j.src = "https://www.googletagmanager.com/gtm.js?id=" + id + dl;
    f.parentNode.insertBefore(j, f);
}(window, document, "script", "dataLayer", "GTM-P5XFDXT", "GTM-5HT2QFC", blacksunplc.sitemaps));

var _nht_args = {};
_nht_args.rta_k = "GNjCU6LhEV";
window._nht_args = _nht_args;
(function () {
    var rta_js = document.createElement("script");
    rta_js.type = "text/javascript";
    rta_js.async = true;
    rta_js.src = "https://trace.rtbasia.com/nht_static.js";
    document.getElementsByTagName("head")[0].appendChild(rta_js);
}());

/*jslint browser: true, fudge: true, long: true */
/*global blacksunplc, jQuery, location, parseInt, setTimeout, window */

jQuery(function ($) {
    "use strict";


    var arrays = blacksunplc.arrays; // import * as arrays   from "module:blacksunplc/arrays"
    var security = blacksunplc.security; // import * as security from "module:blacksunplc/security"

    /**
     * @param {!Element} carousel
     * @param {boolean} pager
     * @param {number} pagerCurrent
     * @param {number} pagerTotal
     */
    function afterInit(carousel, pager, pagerCurrent, pagerTotal) {

        if (pager) {
            /* Append pager HTML. */
            $(carousel).append("<div class='slick-pager'>" +
                "<span class='slick-pager-current'>" + pagerCurrent + "</span>" + "/" +
                "<span class='slick-pager-total'>" + pagerTotal + "</span>" +
                "</div>");
        }

        if (pagerTotal < 2) {
            $(".slick-pager", carousel).hide();
        }
    }

    /**
     * @param {!Element} carousel
     * @param {boolean} pager
     * @param {number} nextSlide
     */
    function beforeChange(carousel, pager, nextSlide) {
        if (pager) {
            /* Update pager number. */
            $(".slick-pager-current", carousel).text(nextSlide + 1);
        }
    }

    /**
     * @param {!Element} carousel
     * @param {boolean} pager
     * @param {boolean} vertical
     */
    function afterChange(carousel, pager, vertical) {

        if (vertical) {
            $(".slick-current", carousel).scrollTop(0);
        }

        if (pager) {
            $("#share-dialog").hide();
            var $active = $(".slick-active", carousel);
            if ($active.length) {
                var activePageHash = /** @type {string} */ ($active.attr("data-page"));
                /*
                 * Use location.hash to set hash instead of history push state could
                 * prevent the browser back and forward button not working properly.
                 */
                location.hash = activePageHash;
            }
        }
    }

    /**
     * @param {!Element} carousel
     * @param {string} page
     */
    function initialiseCarousel(carousel, page) {

        var $carousel = $(carousel);
        var pagerTotal = $carousel.children().length;
        var data = /** @type {{dots: boolean, arrows: boolean, draggable: boolean, swipe: boolean, vertical: boolean, pager: boolean}} */ ($carousel.data());

        var config = {
            "dots": data.dots || false,
            "arrows": data.arrows || false,
            "infinite": true,
            "speed": 300,
            "slidesToShow": 1,
            "adaptiveHeight": true,
            "draggable": data.draggable || false,
            "swipe": data.swipe || false,
            "rows": 0,
            "prevArrow": "<button type='button' class='slick-prev'><i class='tr-icon arrow-tail-down-before'></i></button>",
            "nextArrow": "<button type='button' class='slick-next'><i class='tr-icon arrow-tail-down-before'></i></button>"
        };

        if (data.vertical) {
            config.vertical = true;
        }

        var pagerCurrent;
        if (page) {
            pagerCurrent = parseInt($("[data-toggle='modal'][data-page=" + page + "]").attr("data-slideindex"), 10) + 1;
        } else {
            pagerCurrent = 1;
        }

        $carousel.on("init", function () {
            afterInit(carousel, data.pager, pagerCurrent, pagerTotal);
        });

        $carousel.slick(config);

        if (page && $(".slick-item[data-page=" + page + "]", carousel).length) {
            $carousel.slick("slickGoTo", $("[data-toggle='modal'][data-page=" + page + "]").attr("data-slideindex"));
        }

        $carousel.on("beforeChange", function (/** !jQuery.Event */ event, /** !Object */ slick, /** number */ currentSlide, /** number */ nextSlide) {
            beforeChange(carousel, data.pager, nextSlide);
        });

        $carousel.on("afterChange", function () {
            afterChange(carousel, data.pager, data.vertical);
        });

        $(window).on("resize", function () {
            setTimeout(function () {
                $carousel.slick("setPosition");
            }, 1000);
        });
    }

    function init() {
        var page = security.safeLocationHash().slice(1);
        arrays.forEach($(".carousel"), function (carousel) {
            initialiseCarousel(carousel, page);
        });
    }

    init();

    /**
     * @param {!Element} slideMajorInvestments
     */
    function initialiseInvestmentCarousel(sectionCarousel) {
        var $sectionCarousel = $(sectionCarousel);
        var numberOfSlides = $sectionCarousel.data("slides");
        if (!numberOfSlides) {
            numberOfSlides = 3;
        }
        var SLICK_CONFIG = {
            "dots": false,
            "infinite": true,
            "speed": 300,
            "slidesToShow": numberOfSlides,
            "slidesToScroll": 1,
            "arrows": true,
            "responsive": [
                {
                    "breakpoint": 1201,
                    "settings": {
                        "slidesToShow": 3
                    }
                }, {
                    "breakpoint": 992,
                    "settings": {
                        "slidesToShow": 2
                    }
                }, {
                    "breakpoint": 601,
                    "settings": {
                        "slidesToShow": 1,
                        "arrows": false
                    }
                }
            ]
        };

        $sectionCarousel.slick(SLICK_CONFIG);
    }

    arrays.forEach($(".tr-section__carousel"), initialiseInvestmentCarousel);

});

/*jslint browser: true, fudge: true, long: true */
/*global DocumentTouch, Headroom, blacksunplc, clearTimeout, document, jQuery, setInterval, setTimeout, window */

jQuery(function($) {
    "use strict";


    var arrays = blacksunplc.arrays; // import * as arrays     from "module:blacksunplc/arrays"
    var attributes = blacksunplc.attributes; // import * as attributes from "module:blacksunplc/attributes"
    var css = blacksunplc.css; // import * as css        from "module:blacksunplc/css"
    var debounce = blacksunplc.functions.debounce; // import {debounce}  from "module:blacksunplc/functions"
    var events = blacksunplc.events; // import * as events from "module:blacksunplc/events"

    /** @return {boolean} */
    function isTouchEnabled() {
        var mediaQuery = [
            "(touch-enabled)",
            "(-webkit-touch-enabled)",
            "(-moz-touch-enabled)",
            "(-o-touch-enabled)",
            "(-ms-touch-enabled)"
        ].join();
        return (
            "ontouchstart" in window ||
            window.DocumentTouch && document instanceof DocumentTouch ||
            css.matchMedia(mediaQuery).matches
        );
    }

    function detectTouch() {
        var cssClass;
        if (isTouchEnabled()) {
            cssClass = "touch-enabled";
        } else {
            cssClass = "no-touch";
        }
        attributes.classList(document.body).add(cssClass);
    }

    detectTouch();

    function removeQuickLinksIcon() {
        $(".quicklinks .quicknav").remove();
    }

    /**
     * @param {string} id
     * @param {string} text
     * @return {string} An HTML string for a list item.
     */
    function quickLinksTemplate(id, text) {
        return "<li><a href=#" + id + " class='quicknav-link'><i class='tr-icon arrow-open-down-before '></i>" + text + "</a></li>";
    }

    /**
     * This will look for quick-links-required class on the page.
     * If its present then will provide Dynamic Quick Links feature.
     */
    function generateDynamicQuickLinks() {

        if ($(".quick-links-required").length === 0) {
            removeQuickLinksIcon();
            return;
        }

        $(".quicklinks .quicknav").css("display", "block");

        var $quickLinksItems = $("[data-quick-links-item]");
        if ($quickLinksItems.length === 0 && !$(document.body).hasClass("our-story-page")) {
            removeQuickLinksIcon();
            return;
        }

        arrays.forEach($quickLinksItems, function(quickLinksItem) {
            var id = quickLinksItem.getAttribute("id");
            var text = quickLinksItem.getAttribute("data-quick-links-item");
            var htmlString = quickLinksTemplate(id, text);
            $(".quicknav .quicknav-links ul").append(htmlString);
        });
    }

    //    function removeBackToTop() {
    //        $(".quicklinks .back-to-top").remove();
    //    }
    //
    //    /**
    //     * This will look for back-to-top-required class on the page.
    //     * If it's present then will provide Back to Top feature.
    //     */
    //     function generateBackToTopFeature() {
    //         if ($(".back-to-top-required").length === 0) {
    //             removeBackToTop();
    //         }
    //     }

    function removeSocialShare() {
        $(".quicklinks .sharelink").remove();
    }

    /**
     * This will look for social-share-required class on the page .
     * If its present then will provide Social Share feature.
     */
    function generateSocialShareFeature() {
        if ($(".social-share-required").length === 0) {
            removeSocialShare();
        }
    }

    generateDynamicQuickLinks();
    //    generateBackToTopFeature();
    generateSocialShareFeature();

    /* A nested "ready" callback: perhaps it needs to be called _after_ the above script. */
    jQuery(function() {

        /* Note The `outerWidth` method is not applicable to window objects; use function `layoutViewport` from "module:blacksunplc/css" instead. */
        var windowOuterWidth1 = /** @type {number} */ ($(window).outerWidth());
        var desktop = 1025;
        var header = /** @type {!HTMLElement} */ (document.querySelector("header"));
        var headroomIs = false;

        /* Construct an instance of Headroom, passing the "header" element. */
        var headroom = new Headroom(header, {
            "offset": 150,
            "tolerance": 5,
            "classes": {
                "initial": "animated",
                "pinned": "slideDown",
                "unpinned": "slideUp"
            }
        });

        if (windowOuterWidth1 < desktop && headroomIs === false) {
            headroomIs = true;
            headroom.init();
        }

        function handleHeadroomOnResize() {
            /* Note The `outerWidth` method is not applicable to window objects; use function `layoutViewport` from "module:blacksunplc/css" instead. */
            var windowOuterWidth2 = /** @type {number} */ ($(window).outerWidth());

            if (windowOuterWidth2 < desktop && headroomIs === false) {
                headroomIs = true;
                headroom.init();
            }

            if (windowOuterWidth2 >= desktop && headroomIs === true) {
                headroom.destroy();

                headroomIs = false;
                $("header").removeClass("slideUp");
            }
        }

        /* Function to adjust fullpage height on iOS to allow for the URL bar. */
        if ($("#fullpage").length && $(".our-story-page").length === 0) {
            var height = window.innerHeight;
            var resize = function() {
                if (window.innerHeight !== height) {
                    height = window.innerHeight;
                    $(".section, .fp-tableCell").css("height", height + "px");
                }
            };
            setInterval(resize, 500); // Don't lower more than 500 milliseconds, otherwise there will be animation-problems with the  Safari toolbar
            $(window).on("resize", resize);
        }
        // end

        var resizeTimer = 0;
        $(window).on("resize", function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(handleHeadroomOnResize, 250);
        });

        /* Note: to be removed on 10th */
        if ($(document.body).hasClass("conference-recording")) {
            $(".header-links > li > a:not('.current'):not('.header-download-link'):not(.header-print-basket-link)").attr("href", "/zh/media-centre/videos.html");
            $(".mobile-links--left > li a:not('.current'):not('.header-download-link'):not(.header-print-basket-link)").attr("href", "/zh/media-centre/videos.html");
        }
    });

    // image caption show/hide
    var $caption = $(".image-caption .icon-info");
    var $imgCaption = $(".image-caption");

    if ($imgCaption.length > 0) {
        $caption.on("click", function(e) {
            e.preventDefault();

            $(this).focus();
            $(this).parent().toggleClass("show");
            $(this).parent().parent().toggleClass("show");
        }).on("focusout", function() {
            $(this).parent().removeClass("show");
            $(this).parent().parent().removeClass("show");
        });

    }

    function addWindowOnScrollListener() {
        if ($(".image-caption.show").length > 0) {
            if ($(window).scrollTop() >= $(".image-caption.show").offset().top) {
                $imgCaption.removeClass("show");
                $imgCaption.parent().removeClass("show");

            }
        }
    }

    events.add(window, "scroll", debounce(addWindowOnScrollListener, 50));

});
/* Copyright (c) 2020 Black Sun Plc. All rights reserved. */
/*jslint browser: true, fudge: true, long: true, white: true */
/*global $, blacksunplc, decodeURIComponent, document, encodeURIComponent */

/** @module blacksunplc/cookieconsent */
(function () {
    "use strict";


    var objects = blacksunplc.objects; // import * as objects    from "module:blacksunplc/objects"
    var arrays = blacksunplc.arrays; // import * as arrays     from "module:blacksunplc/arrays"
    var attributes = blacksunplc.attributes; // import * as attributes from "module:blacksunplc/attributes"
    var dates = blacksunplc.dates; // import * as dates      from "module:blacksunplc/dates"
    var events = blacksunplc.events; // import * as events     from "module:blacksunplc/events"
    var storage = blacksunplc.storage; // import * as storage    from "module:blacksunplc/storage"
    var jsonml = blacksunplc.jsonml; // import * as jsonml     from "module:blacksunplc/jsonml"
    var ccConfig = blacksunplc.ccConfig; // import * as ccConfig   from "module:blacksunplc/ccConfig"

    /* Must match the name used by the COOKIE. */
    var COOKIE_NAME = "cookieconsent_2020";

    /* Maximum age is a period of 90 days, expressed in seconds. */
    var COOKIE_OPTIONS = {"maxAge": 90 * 24 * 60 * 60};

    /* The known Google Analytics cookies (last checked on 2020-04-01). */
    //    var ANALYTICS_NAMES = [/^_ga/, "_gid", "OT_1073743404"];
    var ANALYTICS_NAMES = [/.*/];

    /* Implements the Web Storage API for cookies. */
    var cookieStorage = storage.cookieStorage();

    /** @return {!blacksunplc.CookieControl} */
    function getCookieControl() {
        var cookieItem = cookieStorage.getItem(COOKIE_NAME);
        if (cookieItem) {
            return /** @type {!blacksunplc.CookieControl} */ (JSON.parse(decodeURIComponent(cookieItem.value)));
        }
        return {"modified": 0,
            "consent": {"analytics": "init"}};
    }

    /** @param {!blacksunplc.CookieControl} cookieControl */
    function setCookieControl(cookieControl) {
        cookieControl.modified = dates.now();
        var value = encodeURIComponent(JSON.stringify(cookieControl));
        cookieStorage.setItem(COOKIE_NAME, value, COOKIE_OPTIONS);
    }

    storage.installFilter();
    storage.certifyLawfulBasis([COOKIE_NAME]);
    if (getCookieControl().consent.analytics !== "deny") {
        storage.certifyLawfulBasis(ANALYTICS_NAMES);
    }

    /** @param {boolean} isDropdown */
    function openDialog(isDropdown) {
        var dialog = document.querySelector("#cc-dialog");
        if (dialog) {
            var dialogClassList = attributes.classList(dialog);
            if (isDropdown) {
                dialogClassList.add("cc-dropdown");
            }
            dialogClassList.remove("cc-invisible");
        }
        var dialogMobile = document.querySelector("#cc-mobile-dialog");
        var dropdownMobile = document.querySelector("li.cc-dropdown-li");
        if (dialogMobile && dropdownMobile) {
            attributes.classList(dialogMobile).remove("cc-invisible");
            attributes.classList(dropdownMobile).remove("cc-collapsed");
        }
    }

    function closeDialog() {
        var dialog = document.querySelector("#cc-dialog");
        if (dialog) {
            attributes.classList(dialog).add("cc-invisible");
        }
        var dialogMobile = document.querySelector("#cc-mobile-dialog");
        var dropdownMobile = document.querySelector("li.cc-dropdown-li");
        if (dialogMobile && dropdownMobile) {
            attributes.classList(dialogMobile).add("cc-invisible");
            attributes.classList(dropdownMobile).add("cc-collapsed");
        }
        $(".tools .cookieConsent").addClass("show");
    }

    function updateButtons() {
        var cStatus = Boolean(getCookieControl().consent.analytics !== "deny");
        var denyElements = document.querySelectorAll(".cc-deny");
        arrays.forEach(denyElements, function (element) {
            var denyClassList = attributes.classList(element);
            if (cStatus) {
                denyClassList.remove("cc-turn-on");
            } else {
                denyClassList.add("cc-turn-on");
            }
        });

        var allowElements = document.querySelectorAll(".cc-btn.cc-dismiss");
        arrays.forEach(allowElements, function (element) {
            var allowClassList = attributes.classList(element);
            if (cStatus) {
                allowClassList.add("cc-turn-on");
            } else {
                allowClassList.remove("cc-turn-on");
            }
        });
    }

    /** @const */
    var exports = {};

    /** @return {string} One of "init", "deny", or "allow". */
    exports.getStatus = function () {
        var consent = getCookieControl().consent;
        return consent.analytics;
    };

    exports.deny = function () {
        var cookieControl = getCookieControl();
        storage.revokeLawfulBasis(ANALYTICS_NAMES);
        cookieControl.consent.analytics = "deny";
        setCookieControl(cookieControl);
        closeDialog();
        updateButtons();
    };

    exports.allow = function () {
        var cookieControl = getCookieControl();
        storage.certifyLawfulBasis(ANALYTICS_NAMES);
        cookieControl.consent.analytics = "allow";
        setCookieControl(cookieControl);
        closeDialog();
        updateButtons();
    };

    exports.dismiss = function () {
        var cookieControl = getCookieControl();
        if (exports.getStatus() === "init") {
            storage.certifyLawfulBasis(ANALYTICS_NAMES);
            cookieControl.consent.analytics = "allow";
        }
        setCookieControl(cookieControl);
        closeDialog();
        updateButtons();
    };

    /**
     * @param {string} id
     * @param {string} classes
     * @return {!blacksunplc.JsonML}
     */
    function cookieConsentDialogTemplate(id, classes) {
        return (
            [
                "div", {"id": id,
                    "role": "dialog",
                    "aria-live": "polite",
                    "aria-label": "cookieconsent",
                    "aria-describedby": "cookieconsent:desc",
                    "class": classes},
                ["span", {"class": "cc-message"}, ccConfig.message],
                ["span", {"class": "cc-dropdown-message"}, ccConfig.dropDownMessage],
                [
                    "a", {"aria-label": "deny cookies",
                        "role": "button",
                        "tabindex": "0",
                        "class": "cc-btn cc-deny"}, ccConfig.turnOffLabel
                ],
                [
                    "a", {"aria-label": "dismiss cookies",
                        "role": "button",
                        "tabindex": "0",
                        "class": "cc-btn cc-dismiss cc-turn-on"}, ccConfig.turnOnLabel
                ],
                [
                    "span", {"class": "learn-more"},
                    ccConfig.privacyMessageLeftPart,
                    [
                        "a",
                        {"aria-label": "learn more about cookies",
                            "role": "button",
                            "tabindex": "0",
                            "class": "cc-link",
                            "href": ccConfig.privacyLink,
                            "rel": "noopener noreferrer nofollow",
                            "target": "_blank"},
                        ccConfig.privacyLabel
                    ],
                    ccConfig.privacyMessageRightPart
                ],
                [
                    "div", {"class": "cc-close"},
                    [
                        "a", {"aria-label": "dismiss cookie message",
                            "role": "button",
                            "tabindex": "0",
                            "class": "cc-dismiss"}
                    ]
                ]
            ]
        );
    }

    /** @return {!blacksunplc.JsonML} */
    function mobileCookieConsentDialogTemplate() {
        var id = "cc-mobile-dialog";
        var classes = "cc-window cc-dropdown cc-invisible";
        var dialog = cookieConsentDialogTemplate(id, classes);
        return ["li", {"class": "cc-dropdown-li cc-collapsed"}, dialog];
    }

    /** @return {!blacksunplc.JsonML} */
    function desktopCookieConsentDialogTemplate() {
        var id = "cc-dialog";
        var classes = "cc-window cc-main cc-invisible";
        return cookieConsentDialogTemplate(id, classes);
    }

    exports.addNavNotice = function () {
        // add mobile nav
        var mainNavList = document.querySelector(".main-navigation>ul");
        if (mainNavList) {
            jsonml.prepend(mainNavList, mobileCookieConsentDialogTemplate());
        }
        var ccDeny = document.querySelector("#cc-mobile-dialog .cc-deny");
        if (ccDeny) {
            events.add(ccDeny, "click", function () {
                exports.deny();
            });
        }
        var ccDismiss = document.querySelector("#cc-mobile-dialog a.cc-btn.cc-dismiss");
        if (ccDismiss) {
            events.add(ccDismiss, "click", function () {
                exports.allow();
            });
        }
        var ccClose = document.querySelector("#cc-mobile-dialog .cc-close");
        if (ccClose) {
            events.add(ccClose, "click", function () {
                exports.dismiss();
            });
        }
    };

    function addNotice() {
        // Add desktop notice
        jsonml.append(document.body, desktopCookieConsentDialogTemplate());

        $(".tool-cookieConsent").on("click", function () {
            openDialog(true);
        });
        var ccDeny = document.querySelector("#cc-dialog .cc-deny");
        if (ccDeny) {
            events.add(ccDeny, "click", exports.deny);
        }
        var ccDismiss = document.querySelector("#cc-dialog a.cc-btn.cc-dismiss");
        if (ccDismiss) {
            events.add(ccDismiss, "click", exports.allow);
        }
        var ccClose = document.querySelector("#cc-dialog .cc-close");
        if (ccClose) {
            events.add(ccClose, "click", exports.dismiss);
        }
        updateButtons();
    }

    /* Wait for DOMContentLoaded before accessing the DOM. */
    events.ready(function () {
        addNotice();
        if (exports.getStatus() === "init") {
            openDialog(false);
        } else {
            closeDialog();
        }
    });

    blacksunplc.cookieconsent = objects.freeze(exports);

}());

/*jslint browser: true, fudge: true, long: true */
/*global document, navigator */

(function () {
    "use strict";

    var wechatPopup = document.querySelector(".wechat-popup");
    var wechatCode = document.querySelector(".wechat-code");

    function weChatPopupContent() {
        if ((/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i).test(navigator.userAgent)) {
            if (document.documentElement.lang === "zh") {
                document.querySelector(".wechat-code .instructions").innerText = "或搜索微信号\r\ntemasek_digital，\r\n关注我们";
            } else {
                document.querySelector(".wechat-code .instructions").innerText = "Or find us on \r\nWeChat: temasek_digital";
            }
        } else if (document.documentElement.lang === "zh") {
            document.querySelector(".wechat-code .instructions").innerText = "扫描QR码，了解更多资讯";
        } else {
            document.querySelector(".wechat-code .instructions").innerText = "For more information, \r\nscan the QR code";
        }
    }

    function wechatPopupClose() {
        document.querySelector(".wechat-code button").onclick = function () {
            wechatCode.classList.remove("active");
        };
    }

    function weChatPopup() {
        wechatPopup.onclick = function (event) {
            event.preventDefault();
            event.stopPropagation();
            wechatCode.classList.add("active");
            wechatPopupClose();
        };
    }

    weChatPopup();
    weChatPopupContent();

})();

/*jslint browser: true, fudge: true, long: true */
/*global console, jQuery, location */


(function () {

    var freeze = blacksunplc.objects.freeze; // import {freeze}     from "module:blacksunplc/objects"

    var exports = {};

    /**
     * Maps root-relative URLs, including fragments, to Tiny-URL codes.
     * @const {!Object<string>}
     */
    var TINY_URL_CODES = {
        "/": "NFiRg",
        "/legal-notice.html": "kmMZS",
        "/privacy.html": "jcPYi",
        "/accessibility.html": "eiQHS",
        "/sitemap.html": "vsavQ",
        "/contacts.html": "EQkrm",
        "/acknowledgements.html": "scDRs",
        "/independent-practitioners-report.html": "ItmfP",
        "/fr/": "bkSCs",
        "/de/": "hYbIB",
        "/error500.html": "xJhCt",
        "/not-found.html": "srLtY",
        "/overview/from-our-chairman.html": "WKkQU",
        "/overview/the-temasek-charter.html": "JTeFz",
        "/overview/performance-overview.html": "RQxvF",
        "/overview/portfolio-highlights.html": "CZPFP",
        "/overview/our-financials-and-portfolio.html": "MGurE",
        "/overview/towards-a-net-zero-world.html": "IzQgT",
        "/overview/onetemasek-our-people.html": "JMvUM",
        "/overview/uplifting-lives-and-communities.html": "suhng",
        "/overview/temasek-portfolio-at-inception.html": "VgyxM",
        "/pathways-to-sustainability/towards-a-sustainable-future.html": "vlhzj",
        "/pathways-to-sustainability/putting-a-price-on-carbon.html": "sSLYT",
        "/pathways-to-sustainability/investing-for-impact-and-returns.html": "Kxuev",
        "/pathways-to-sustainability/measuring-and-tracking-portfolio-emissions.html": "nZmAC",
        "/pathways-to-sustainability/enabling-a-sustainable-company.html": "eKMUH",
        "/pathways-to-sustainability/collaborating-for-progress.html": "VrKml",
        "/pathways-to-sustainability/producing-sustainable-animal-feed.html": "SXjvc",
        "/pathways-to-sustainability/building-green-ports.html": "Akhca",
        "/investor/how-we-invest.html": "nRqHB",
        "/investor/how-we-grew.html": "rpsdM",
        "/investor/total-shareholder-return.html": "crVVh",
        "/investor/investment-update.html": "TDhLh",
        "/investor/how-we-manage-risks.html": "BMIRn",
        "/investor/12-month-returns-simulation.html": "mGSOr",
        "/investor/20-year-returns-outlook.html": "jUoEC",
        "/institution/a-forward-looking-institution.html": "cNfKL",
        "/institution/financial-discipline.html": "aCdfU",
        "/institution/public-markers.html": "SSIAV",
        "/institution/credit-quality.html": "MPvOT",
        "/institution/temasek-bonds.html": "GdRmC",
        "/institution/wealth-added.html": "rEgdw",
        "/institution/instilling-ownership.html": "DeQhM",
        "/institution/our-meritt-values.html": "TwLoJ",
        "/institution/our-onetemasek-team.html": "HuAKx",
        "/institution/our-temasek-heartbeat.html": "LSaym",
        "/institution/board-of-directors.html": "KMUzf",
        "/institution/senior-management.html": "VWVlD",
        "/steward/a-trusted-steward.html": "jfWuT",
        "/steward/enabling-a-better-world.html": "ahWDA",
        "/steward/making-a-difference.html": "kdqZX",
        "/steward/touching-lives.html": "eaXeX",
        "/steward/rising-above-covid-19.html": "nJkvm",
        "/steward/fostering-stewardship-and-governance.html": "OsaQD",
        "/steward/sharing-perspectives.html": "Bdqsa",
        "/our-stories/the-race-against-the-clock-to-net-zero.html": "LUYMR",
        "/our-stories/chinas-gen-z-next-normal-consumers.html": "YyZnG",
        "/our-stories/paying-it-forward-by-mentoring.html": "WSZrp",
        "/our-stories/swabs-and-scrubs-a-covid-19-response.html": "bHMEk",
        "/our-stories/racing-against-covid-19-to-save-lives.html": "cBsCY",
        "/our-major-investments/financial-services.html": "fzMvP",
        "/our-major-investments/telecommunications-media-and-technology.html": "brUNc",
        "/our-major-investments/transportation-and-industrials.html": "uTjVr",
        "/our-major-investments/consumer-and-real-estate.html": "MvuYd",
        "/our-major-investments/life-sciences-and-agri-food.html": "ZcPSf",
        "/group-financials/adopting-international-accounting-standards.html": "sokem",
        "/group-financials/group-financial-summary.html": "fLhAP",
        "/group-financials/statement-by-auditors.html": "gkVLg",
        "/group-financials/statement-by-directors.html": "vMJep",
        "/group-financials/group-income-statements.html": "dwhaY",
        "/group-financials/group-balance-sheets.html": "IrhZW",
        "/group-financials/group-cash-flow-statements.html": "ZVHlJ",
        "/group-financials/group-statements-of-changes-in-equity.html": "bWoxv",
        "/media-centre/chart-centre.html": "JJpbb",
        "/media-centre/videos.html": "OBPes",
        "/media-centre/downloads.html": "UkBFQ",
        "/media-centre/temasek-review-2021-bounce-forward.html": "nzfHf",
        "/media-centre/paying-it-forward-mentoring-for-resilience.html": "YxgHN",
        "/media-centre/forging-pathways-to-decarbonisation.html": "gAWom",
        "/media-centre/temasek-review-2021-media-conference-recording.html": "qZysn",
        "/downloads/Temasek-Review-2021-Highlights.pdf": "hMGJR",
        "/downloads/Pathways-to-Sustainability.pdf": "xhKPB",
        "/downloads/Rising-Above-COVID-19.pdf": "rZSFz",
        "/downloads/Our-OneTemasek-Team.pdf": "qJbbi",
        "/downloads/Temasek-Review-2021-Media-Release.pdf": "EuqLP",
        "/downloads/Temasek-Review-2021-Panellists-Biographies.pdf": "zovXo",
        "/downloads/Temasek-Review-2021-Presentation-Slides.pdf": "QCVVX",
        "/downloads/Temasek-Review-2021-Presentation-Transcript.pdf": "rwMRV",
        "/downloads/Temasek-Review-2021-Exchange-Rates.pdf": "PLnpz",
        "/downloads/Temasek-Review-2021-Photo-of-Panellists.jpg": "VSaxk",
        "/downloads/Temasek-Review-2021-Nagi-HAMIYEH.jpg": "IeWlp",
        "/downloads/Temasek-Review-2021-Mukul-CHAWLA.jpg": "YyQQd",
        "/downloads/Temasek-Review-2021-FOCK-Wai-Hoong.jpg": "XADwn",
        "/downloads/Temasek-Review-2021-NEO-Gim-Huay.jpg": "aiLAr",
        "/downloads/TR21_StraitsTimes_14Jul21.pdf": "ujlmL",
        "/downloads/TR21_BusinessTimes_14Jul21.pdf": "UEiTi",
        "/downloads/TR21_LianheZaobao_14Jul21.pdf": "RicZq",
        "/downloads/TR21_BeritaHarian_14Jul21.pdf": "esiQM",
        "/downloads/TR21_TamilMurasu_14Jul21.pdf": "xAzxK",
        "/downloads/TR21_SundayTimes_18Jul21.pdf": "bwaRs",
        "/downloads/TR21_LianheZaobao_Sunday_18Jul21.pdf": "rSgqS",
        "/downloads/TR21_BeritaMinggu_18Jul21.pdf": "VzYUz",
        "/downloads/TR21_TamilMurasu_Sunday_18Jul21.pdf": "IJoak",
        "/downloads/TR21_LianheWanbao_Sunday_18Jul21.pdf": "ZTJUU",
        "/downloads/TR21_ShinMinDaily_Sunday_18Jul21.pdf": "iCEuU",
        "/#overcoming-challenges": "xoNYb",
        "/#no-one-is-safe-till-everyone-is": "gRJZw",
        "/#forward-looking": "vVKvT",
        "/#catalysing-positive-impact": "FLMfJ",
        "/#bouncing-forward": "Ajnnt",
        "/independent-practitioners-report.html#emission-metrics": "HvqgU",
        "/overview/from-our-chairman.html#portfolio-performance": "YYIJk",
        "/overview/from-our-chairman.html#forging-resilience": "pJQoE",
        "/overview/from-our-chairman.html#steering-through-volatility": "mKOtF",
        "/overview/from-our-chairman.html#bouncing-forward-to-a-better-tomorrow": "ueFEC",
        "/overview/from-our-chairman.html#accelerating-to-a-sustainable-world": "tqWmY",
        "/overview/from-our-chairman.html#in-appreciation": "vSLPi",
        "/overview/the-temasek-charter.html#active-investor": "jZKvk",
        "/overview/the-temasek-charter.html#forward-looking-institution": "CZMcm",
        "/overview/the-temasek-charter.html#trusted-steward": "vKDUH",
        "/overview/performance-overview.html#net-portfolio-value": "brwqu",
        "/overview/performance-overview.html#investments-and-divestments": "YWXCI",
        "/overview/performance-overview.html#portfolio-by-geography": "tBoNu",
        "/overview/performance-overview.html#total-shareholder-return": "PKxzH",
        "/overview/performance-overview.html#rolling-total-shareholder-return": "DJMdt",
        "/overview/performance-overview.html#dividend-income": "yKkWa",
        "/overview/portfolio-highlights.html#geography": "ZKLBu",
        "/overview/portfolio-highlights.html#sector": "eKsaK",
        "/overview/portfolio-highlights.html#liquidity": "cZwQy",
        "/overview/portfolio-highlights.html#currency": "iMbvD",
        "/overview/portfolio-highlights.html#single-name": "kWYfX",
        "/overview/our-financials-and-portfolio.html#performance-overview": "IVOaX",
        "/overview/our-financials-and-portfolio.html#portfolio-highlights": "pCtPG",
        "/overview/our-financials-and-portfolio.html#our-investment-approach": "eJrjn",
        "/overview/our-financials-and-portfolio.html#our-major-investments": "KsADK",
        "/overview/towards-a-net-zero-world.html#advancing-decarbonisation": "NCtYr",
        "/overview/towards-a-net-zero-world.html#how-we-invest": "XGCZN",
        "/overview/towards-a-net-zero-world.html#towards-a-net-zero-world": "aTdNB",
        "/overview/towards-a-net-zero-world.html#enabling-a-sustainable-company": "FRSvs",
        "/overview/onetemasek-our-people.html#a-forward-looking-institution": "vBPrd",
        "/overview/onetemasek-our-people.html#building-capabilities": "KEvia",
        "/overview/onetemasek-our-people.html#doing-good-together": "qOYUq",
        "/overview/uplifting-lives-and-communities.html#rising-above-covid-19": "OvyuA",
        "/overview/uplifting-lives-and-communities.html#making-a-difference-and-touching-lives": "XrxGa",
        "/pathways-to-sustainability/investing-for-impact-and-returns.html#investing-in-climate-aligned-opportunities": "wHfjU",
        "/pathways-to-sustainability/investing-for-impact-and-returns.html#enabling-carbon-negative-solutions": "jEyxp",
        "/pathways-to-sustainability/investing-for-impact-and-returns.html#encouraging-decarbonisation-efforts-in-businesses": "pCXsu",
        "/pathways-to-sustainability/investing-for-impact-and-returns.html#beyond-carbon-impact": "wGpOg",
        "/pathways-to-sustainability/measuring-and-tracking-portfolio-emissions.html#towards-net-zero": "wRIXp",
        "/pathways-to-sustainability/enabling-a-sustainable-company.html#annual-environment-footprint": "isVjW",
        "/pathways-to-sustainability/building-green-ports.html#electric-yard-cranes": "UiovY",
        "/pathways-to-sustainability/building-green-ports.html#battery-powered-automated-guided-vehicles-agvs": "MEDNN",
        "/investor/how-we-invest.html#four-structural-trends": "joEJg",
        "/investor/how-we-invest.html#delivering-sustainable-returns-over-the-long-term": "aWaYK",
        "/investor/how-we-grew.html#npv-since-inception": "svUEH",
        "/investor/how-we-grew.html#relation-between-npv-and-tsr": "YPiWJ",
        "/investor/total-shareholder-return.html#tsr": "nhebw",
        "/investor/investment-update.html#investment-highlights": "CwQQa",
        "/investor/investment-update.html#catalysing-innovative-solutions": "zanQo",
        "/investor/investment-update.html#strengthening-enterprises": "Pcwwy",
        "/investor/investment-update.html#an-enabler-of-growth-capital": "gOSin",
        "/investor/how-we-manage-risks.html#organisational-risk-management-framework": "TDKai",
        "/investor/how-we-manage-risks.html#illustration-of-fundamental-earnings-impact": "PNkpV",
        "/investor/how-we-manage-risks.html#vix-trend-and-var": "tnorK",
        "/investor/how-we-manage-risks.html#legal-and-regulatory": "JxbYM",
        "/investor/how-we-manage-risks.html#business-continuity-and-incident-management": "lTTMT",
        "/investor/12-month-returns-simulation.html#simulation-12-month-forward-returns": "IEyss",
        "/investor/12-month-returns-simulation.html#volatility-of-returns": "Afjzs",
        "/investor/20-year-returns-outlook.html#economic-scenario-based-approach": "YfFwa",
        "/investor/20-year-returns-outlook.html#projection-economic-fundamentals": "rqcdb",
        "/investor/20-year-returns-outlook.html#economic-scenario-pathing": "kmTRw",
        "/investor/20-year-returns-outlook.html#twenty-year-expected-returns-portfolio-mix": "aQBaK",
        "/investor/20-year-returns-outlook.html#likelihood-20-year-geometric-returns-portfolio": "vKdjg",
        "/investor/20-year-returns-outlook.html#likelihood-20-year-annual-returns-portfolio": "CGRdh",
        "/investor/20-year-returns-outlook.html#twenty-year-expected-returns-scenarios": "ReNya",
        "/investor/20-year-returns-outlook.html#likelihood-20-year-geometric-returns-scenario": "FreaV",
        "/investor/20-year-returns-outlook.html#likelihood-20-year-annual-returns-scenario": "kDkOR",
        "/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-us": "RQTsm",
        "/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-eu": "USlnE",
        "/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-cn": "lGSgH",
        "/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-sg": "daCjZ",
        "/institution/financial-discipline.html#capital-and-liquidity-management": "uWnAu",
        "/institution/financial-discipline.html#liability-management": "qALUM",
        "/institution/financial-discipline.html#foreign-exchange-management": "tsGyI",
        "/institution/financial-discipline.html#key-recurring-income-vs-debt-maturity": "uQNdG",
        "/institution/credit-quality.html#total-debt-5-percent-of-net-portfolio-value": "YDbiV",
        "/institution/credit-quality.html#total-debt-12-percent-of-liquid-assets": "TVSLS",
        "/institution/credit-quality.html#interest-expense-4-percent-of-dividend-income": "Dikhi",
        "/institution/credit-quality.html#interest-expense-1-percent-of-recurring-income": "MZzEE",
        "/institution/credit-quality.html#total-debt-due-in-one-year-5-percent-of-recurring-income": "tTkDa",
        "/institution/credit-quality.html#total-debt-due-in-next-10-years-18-percent-of-liquidity-balance": "QVsen",
        "/institution/credit-quality.html#key-credit-parameters": "lvTRG",
        "/institution/temasek-bonds.html#temasek-bonds-maturity-profile-and-coupon": "iLvPt",
        "/institution/wealth-added.html#illustration-of-wealth-added": "qnbNR",
        "/institution/instilling-ownership.html#annual-cash-bonuses": "vWuTU",
        "/institution/instilling-ownership.html#rolling-total-shareholder-return": "vqyVJ",
        "/institution/instilling-ownership.html#wa-bonus-bank": "iEXbz",
        "/institution/instilling-ownership.html#co-ownership-grants": "JVNQR",
        "/institution/instilling-ownership.html#co-ownership-alignment": "Hduda",
        "/institution/instilling-ownership.html#wa-incentives-of-key-team": "yKksN",
        "/institution/our-onetemasek-team.html#rooted-in-meritocracy": "wEwgr",
        "/institution/our-onetemasek-team.html#developing-our-people": "LcnrZ",
        "/institution/our-onetemasek-team.html#an-inclusive-team": "tjfdb",
        "/institution/our-onetemasek-team.html#supporting-our-communities": "zaJVG",
        "/institution/our-temasek-heartbeat.html#supporting-our-people": "zgTTZ",
        "/institution/our-temasek-heartbeat.html#growing-our-talent": "bhOKx",
        "/institution/our-temasek-heartbeat.html#making-a-difference": "WaVdd",
        "/institution/our-temasek-heartbeat.html#doing-good-together": "orFzL",
        "/institution/our-temasek-heartbeat.html#our-staff-composition": "cDyUm",
        "/institution/board-of-directors.html#executive-committee": "gbWHp",
        "/institution/board-of-directors.html#audit-committee": "imhQE",
        "/institution/board-of-directors.html#ldcc": "Kqwnf",
        "/institution/board-of-directors.html#board-governance": "pAucd",
        "/institution/board-of-directors.html#board-committee-memberships": "CXnCQ",
        "/steward/a-trusted-steward.html#relating-president-singapore": "PRryE",
        "/steward/a-trusted-steward.html#protection-past-reserves": "ckhcc",
        "/steward/a-trusted-steward.html#relating-shareholder": "rxYmE",
        "/steward/a-trusted-steward.html#relating-portfolio-companies": "BnAtp",
        "/steward/a-trusted-steward.html#relating-communities": "mJSlA",
        "/steward/enabling-a-better-world.html#financial-oversight-and-governance": "oUVja",
        "/steward/enabling-a-better-world.html#temasek-foundation": "zahJh",
        "/steward/enabling-a-better-world.html#mandai-nature-fund": "ALqJA",
        "/steward/enabling-a-better-world.html#temasek-life-sciences-laboratory-tll": "CiEAg",
        "/steward/making-a-difference.html#empowering-families-to-stay-resilient": "vcjrt",
        "/steward/making-a-difference.html#providing-a-safe-environment-for-children": "YIGrI",
        "/steward/making-a-difference.html#a-growing-need-during-the-pandemic": "RVDmj",
        "/steward/making-a-difference.html#building-confidence-and-social-skills": "QcFNq",
        "/steward/making-a-difference.html#adapting-to-the-new-normal": "egwRt",
        "/steward/touching-lives.html#strengthening-social-resilience-and-uplifting-lives": "NLYQd",
        "/steward/touching-lives.html#fostering-international-exchange-and-enhancing-regional-capabilities": "nPAgf",
        "/steward/touching-lives.html#advancing-science-and-protecting-the-planet-for-a-sustainable-world": "AsGQd",
        "/steward/rising-above-covid-19.html#testing-and-diagnosis": "Mrcoh",
        "/steward/rising-above-covid-19.html#collaborating-to-improve-testing-capabilities": "FeMrJ",
        "/steward/rising-above-covid-19.html#containment-and-contact-tracing": "HYpXO",
        "/steward/rising-above-covid-19.html#care-and-treatment": "ZZIfP",
        "/steward/rising-above-covid-19.html#protection-and-prevention": "mFajD",
        "/steward/rising-above-covid-19.html#enablement": "SzGXa",
        "/steward/fostering-stewardship-and-governance.html#wmi": "CYdli",
        "/steward/fostering-stewardship-and-governance.html#sac": "SfzgR",
        "/steward/fostering-stewardship-and-governance.html#sim-kee-boon-institute": "ZyDLX",
        "/steward/fostering-stewardship-and-governance.html#imf-santiago-principles": "bZLAT",
        "/steward/sharing-perspectives.html#tip": "kIWFv",
        "/steward/sharing-perspectives.html#trap": "bKJHu",
        "/steward/sharing-perspectives.html#taap": "qTpsS",
        "/steward/sharing-perspectives.html#teap": "rUhyd",
        "/steward/sharing-perspectives.html#tan": "rGwrS",
        "/our-stories/the-race-against-the-clock-to-net-zero.html#investing-in-tech-to-power-a-cleaner-world": "DmBly",
        "/our-stories/the-race-against-the-clock-to-net-zero.html#bridging-the-gap-with-carbon-credits": "KGlil",
        "/our-stories/chinas-gen-z-next-normal-consumers.html#a-generation-of-digital-natives-comes-of-age": "jTBvp",
        "/our-stories/chinas-gen-z-next-normal-consumers.html#resilience-powered-by-a-predominantly-digital-economy": "VtnQf",
        "/our-stories/paying-it-forward-by-mentoring.html#safe-seamless-and-secure-mask-collection": "ujSwh",
        "/our-stories/paying-it-forward-by-mentoring.html#a-growing-experience-for-both-mentor-and-mentee": "FNsOX",
        "/our-stories/swabs-and-scrubs-a-covid-19-response.html#all-hands-on-deck": "XQHnN",
        "/our-stories/swabs-and-scrubs-a-covid-19-response.html#no-one-size-fits-all-solution": "cdlvn",
        "/our-stories/swabs-and-scrubs-a-covid-19-response.html#getting-from-zero-to-one": "HKQVM",
        "/our-stories/swabs-and-scrubs-a-covid-19-response.html#stronger-together": "hQCQo",
        "/our-stories/racing-against-covid-19-to-save-lives.html#the-need-for-speed": "fyKpF",
        "/our-stories/racing-against-covid-19-to-save-lives.html#eye-on-the-mission": "TrtCo",
        "/our-stories/racing-against-covid-19-to-save-lives.html#in-our-dna-to-help": "qHTeq",
        "/our-stories/racing-against-covid-19-to-save-lives.html#the-fight-continues": "lNBBF",
        "/group-financials/adopting-international-accounting-standards.html#adoption-of-ifrs-16-leases-in-2019": "DKQgJ",
        "/group-financials/adopting-international-accounting-standards.html#adoption-of-ifrs-9-financial-instruments-in-2018": "XBxks",
        "/group-financials/adopting-international-accounting-standards.html#simulated-impact-on-temaseks-group-financials": "TotIj",
        "/group-financials/adopting-international-accounting-standards.html#providing-additional-disclosures": "kRNbh",
        "/group-financials/adopting-international-accounting-standards.html#no-impact-on-other-measures": "qUrjB",
        "/group-financials/adopting-international-accounting-standards.html#adopting-accounting-standards-over-the-years": "GDJUJ",
        "/media-centre/downloads.html#media-conference-materials": "ThNHR",
        "/media-centre/downloads.html#photography": "jgbzV",
        "/media-centre/downloads.html#media-conference-video": "KqYEq",
        "/media-centre/downloads.html#press-advertisements": "bEauS",
        "/zh/": "ZRXJV",
        "/zh/legal-notice.html": "QEzYx",
        "/zh/privacy.html": "KtHOG",
        "/zh/accessibility.html": "GLlEj",
        "/zh/sitemap.html": "smNvt",
        "/zh/contacts.html": "RnyNQ",
        "/zh/acknowledgements.html": "DNMnF",
        "/zh/independent-practitioners-report.html": "gzhPz",
        "/zh/overview/from-our-chairman.html": "IxFeC",
        "/zh/overview/the-temasek-charter.html": "fGrPa",
        "/zh/overview/performance-overview.html": "YIjHC",
        "/zh/overview/portfolio-highlights.html": "NaaSg",
        "/zh/overview/our-financials-and-portfolio.html": "hRQen",
        "/zh/overview/towards-a-net-zero-world.html": "RvbXB",
        "/zh/overview/onetemasek-our-people.html": "gypWm",
        "/zh/overview/uplifting-lives-and-communities.html": "vETMW",
        "/zh/overview/temasek-portfolio-at-inception.html": "nomsx",
        "/zh/pathways-to-sustainability/towards-a-sustainable-future.html": "NZkGp",
        "/zh/pathways-to-sustainability/putting-a-price-on-carbon.html": "LdUBk",
        "/zh/pathways-to-sustainability/investing-for-impact-and-returns.html": "nPGPq",
        "/zh/pathways-to-sustainability/measuring-and-tracking-portfolio-emissions.html": "CjozH",
        "/zh/pathways-to-sustainability/enabling-a-sustainable-company.html": "DgvfR",
        "/zh/pathways-to-sustainability/collaborating-for-progress.html": "UfJds",
        "/zh/pathways-to-sustainability/producing-sustainable-animal-feed.html": "FFkeb",
        "/zh/pathways-to-sustainability/building-green-ports.html": "mdjxj",
        "/zh/investor/how-we-invest.html": "PhtVr",
        "/zh/investor/how-we-grew.html": "qGzKY",
        "/zh/investor/total-shareholder-return.html": "oFkxx",
        "/zh/investor/investment-update.html": "WTKvW",
        "/zh/investor/how-we-manage-risks.html": "sVMSS",
        "/zh/investor/12-month-returns-simulation.html": "AUJKE",
        "/zh/investor/20-year-returns-outlook.html": "Qcald",
        "/zh/institution/a-forward-looking-institution.html": "ajOEq",
        "/zh/institution/financial-discipline.html": "eAehy",
        "/zh/institution/public-markers.html": "tGmQA",
        "/zh/institution/credit-quality.html": "pNjgo",
        "/zh/institution/temasek-bonds.html": "Yehmv",
        "/zh/institution/wealth-added.html": "MdpGU",
        "/zh/institution/instilling-ownership.html": "yxcWo",
        "/zh/institution/our-meritt-values.html": "QDPjQ",
        "/zh/institution/our-onetemasek-team.html": "hMdjn",
        "/zh/institution/our-temasek-heartbeat.html": "MFarm",
        "/zh/institution/board-of-directors.html": "sfHCp",
        "/zh/institution/senior-management.html": "soGEM",
        "/zh/steward/a-trusted-steward.html": "DymlQ",
        "/zh/steward/enabling-a-better-world.html": "zBduK",
        "/zh/steward/making-a-difference.html": "TcybG",
        "/zh/steward/touching-lives.html": "ZGLhK",
        "/zh/steward/rising-above-covid-19.html": "SGQgy",
        "/zh/steward/fostering-stewardship-and-governance.html": "cbWjo",
        "/zh/steward/sharing-perspectives.html": "vVsUG",
        "/zh/our-stories/the-race-against-the-clock-to-net-zero.html": "dovtj",
        "/zh/our-stories/chinas-gen-z-next-normal-consumers.html": "SlgWG",
        "/zh/our-stories/paying-it-forward-by-mentoring.html": "ZuwEC",
        "/zh/our-stories/swabs-and-scrubs-a-covid-19-response.html": "wmiwu",
        "/zh/our-stories/racing-against-covid-19-to-save-lives.html": "XsVGi",
        "/zh/our-major-investments/financial-services.html": "XIVJq",
        "/zh/our-major-investments/telecommunications-media-and-technology.html": "UOBWJ",
        "/zh/our-major-investments/transportation-and-industrials.html": "kifcm",
        "/zh/our-major-investments/consumer-and-real-estate.html": "qVgxc",
        "/zh/our-major-investments/life-sciences-and-agri-food.html": "MFAdY",
        "/zh/group-financials/adopting-international-accounting-standards.html": "jvVpy",
        "/zh/group-financials/group-financial-summary.html": "JxJMe",
        "/zh/group-financials/statement-by-auditors.html": "QAxdl",
        "/zh/group-financials/statement-by-directors.html": "JfunU",
        "/zh/group-financials/group-income-statements.html": "zPSvs",
        "/zh/group-financials/group-balance-sheets.html": "wEJkU",
        "/zh/group-financials/group-cash-flow-statements.html": "YVKsf",
        "/zh/group-financials/group-statements-of-changes-in-equity.html": "hqgMx",
        "/zh/media-centre/chart-centre.html": "HNHVX",
        "/zh/media-centre/videos.html": "ZXMwx",
        "/zh/media-centre/downloads.html": "PMraO",
        "/zh/media-centre/temasek-review-2021-bounce-forward.html": "uUkzR",
        "/zh/media-centre/paying-it-forward-mentoring-for-resilience.html": "fNxgo",
        "/zh/media-centre/forging-pathways-to-decarbonisation.html": "bnMtb",
        "/zh/media-centre/temasek-review-2021-media-conference-recording.html": "faufL",
        "/downloads/Temasek-Review-2021-Highlights-zh.pdf": "cwmbg",
        "/downloads/Pathways-to-Sustainability-zh.pdf": "vHqIP",
        "/downloads/Rising-Above-COVID-19-zh.pdf": "NJllC",
        "/downloads/Our-OneTemasek-Team-zh.pdf": "yGxYY",
        "/downloads/Temasek-Review-2021-Media-Release-zh.pdf": "qKBEx",
        "/downloads/Temasek-Review-2021-Panellists-Biographies-zh.pdf": "BiKWz",
        "/downloads/Temasek-Review-2021-Presentation-Slides-zh.pdf": "PVayE",
        "/downloads/Temasek-Review-2021-Presentation-Transcript-zh.pdf": "nBpao",
        "/downloads/Temasek-Review-2021-Exchange-Rates-zh.pdf": "KmeTD",
        "/zh/#overcoming-challenges": "KcqVv",
        "/zh/#no-one-is-safe-till-everyone-is": "GgkDk",
        "/zh/#forward-looking": "mvJYx",
        "/zh/#catalysing-positive-impact": "TkmTN",
        "/zh/#bouncing-forward": "ZnJYq",
        "/zh/independent-practitioners-report.html#emission-metrics": "ajMKq",
        "/zh/overview/from-our-chairman.html#portfolio-performance": "svYWI",
        "/zh/overview/from-our-chairman.html#forging-resilience": "aRZHV",
        "/zh/overview/from-our-chairman.html#steering-through-volatility": "DwPWZ",
        "/zh/overview/from-our-chairman.html#bouncing-forward-to-a-better-tomorrow": "VheWS",
        "/zh/overview/from-our-chairman.html#accelerating-to-a-sustainable-world": "fuCaS",
        "/zh/overview/from-our-chairman.html#in-appreciation": "iMyVD",
        "/zh/overview/the-temasek-charter.html#active-investor": "BJULk",
        "/zh/overview/the-temasek-charter.html#forward-looking-institution": "PlSRK",
        "/zh/overview/the-temasek-charter.html#trusted-steward": "CCynr",
        "/zh/overview/performance-overview.html#net-portfolio-value": "AYndg",
        "/zh/overview/performance-overview.html#investments-and-divestments": "IuzXn",
        "/zh/overview/performance-overview.html#portfolio-by-geography": "EqkbQ",
        "/zh/overview/performance-overview.html#total-shareholder-return": "OTzXI",
        "/zh/overview/performance-overview.html#rolling-total-shareholder-return": "opxwv",
        "/zh/overview/performance-overview.html#dividend-income": "pOYLI",
        "/zh/overview/portfolio-highlights.html#geography": "pZDcH",
        "/zh/overview/portfolio-highlights.html#sector": "UDUyd",
        "/zh/overview/portfolio-highlights.html#liquidity": "sfFKA",
        "/zh/overview/portfolio-highlights.html#currency": "MbBzd",
        "/zh/overview/portfolio-highlights.html#single-name": "GUkEk",
        "/zh/overview/our-financials-and-portfolio.html#performance-overview": "UauPB",
        "/zh/overview/our-financials-and-portfolio.html#portfolio-highlights": "LlfdG",
        "/zh/overview/our-financials-and-portfolio.html#our-investment-approach": "FlCRA",
        "/zh/overview/our-financials-and-portfolio.html#our-major-investments": "mCjKv",
        "/zh/overview/towards-a-net-zero-world.html#advancing-decarbonisation": "ejljs",
        "/zh/overview/towards-a-net-zero-world.html#how-we-invest": "CoRGE",
        "/zh/overview/towards-a-net-zero-world.html#towards-a-net-zero-world": "UaBvW",
        "/zh/overview/towards-a-net-zero-world.html#enabling-a-sustainable-company": "sGfVD",
        "/zh/overview/onetemasek-our-people.html#a-forward-looking-institution": "jbZew",
        "/zh/overview/onetemasek-our-people.html#building-capabilities": "kAajz",
        "/zh/overview/onetemasek-our-people.html#doing-good-together": "cZuTZ",
        "/zh/overview/uplifting-lives-and-communities.html#rising-above-covid-19": "IAZtD",
        "/zh/overview/uplifting-lives-and-communities.html#making-a-difference-and-touching-lives": "ORVZz",
        "/zh/pathways-to-sustainability/investing-for-impact-and-returns.html#investing-in-climate-aligned-opportunities": "hazxQ",
        "/zh/pathways-to-sustainability/investing-for-impact-and-returns.html#enabling-carbon-negative-solutions": "KIHlH",
        "/zh/pathways-to-sustainability/investing-for-impact-and-returns.html#encouraging-decarbonisation-efforts-in-businesses": "HSRfZ",
        "/zh/pathways-to-sustainability/investing-for-impact-and-returns.html#beyond-carbon-impact": "BdkLf",
        "/zh/pathways-to-sustainability/measuring-and-tracking-portfolio-emissions.html#towards-net-zero": "ZlsTP",
        "/zh/pathways-to-sustainability/enabling-a-sustainable-company.html#annual-environment-footprint": "Ljqab",
        "/zh/pathways-to-sustainability/building-green-ports.html#electric-yard-cranes": "SzxmT",
        "/zh/pathways-to-sustainability/building-green-ports.html#battery-powered-automated-guided-vehicles-agvs": "AZBUd",
        "/zh/investor/how-we-invest.html#four-structural-trends": "BvXKu",
        "/zh/investor/how-we-invest.html#delivering-sustainable-returns-over-the-long-term": "iLWGW",
        "/zh/investor/how-we-grew.html#npv-since-inception": "crRxk",
        "/zh/investor/how-we-grew.html#relation-between-npv-and-tsr": "AUgwL",
        "/zh/investor/total-shareholder-return.html#tsr": "lvFUR",
        "/zh/investor/investment-update.html#investment-highlights": "HMjGR",
        "/zh/investor/investment-update.html#catalysing-innovative-solutions": "TllGy",
        "/zh/investor/investment-update.html#strengthening-enterprises": "BAmhZ",
        "/zh/investor/investment-update.html#an-enabler-of-growth-capital": "dzMiy",
        "/zh/investor/how-we-manage-risks.html#organisational-risk-management-framework": "KOsqV",
        "/zh/investor/how-we-manage-risks.html#illustration-of-fundamental-earnings-impact": "QemHT",
        "/zh/investor/how-we-manage-risks.html#vix-trend-and-var": "wHzWl",
        "/zh/investor/how-we-manage-risks.html#legal-and-regulatory": "IsHFm",
        "/zh/investor/how-we-manage-risks.html#business-continuity-and-incident-management": "PVjQS",
        "/zh/investor/12-month-returns-simulation.html#simulation-12-month-forward-returns": "rTWAY",
        "/zh/investor/12-month-returns-simulation.html#volatility-of-returns": "CoxCm",
        "/zh/investor/20-year-returns-outlook.html#economic-scenario-based-approach": "velzQ",
        "/zh/investor/20-year-returns-outlook.html#projection-economic-fundamentals": "BUCxp",
        "/zh/investor/20-year-returns-outlook.html#economic-scenario-pathing": "DEitt",
        "/zh/investor/20-year-returns-outlook.html#twenty-year-expected-returns-portfolio-mix": "mMKQp",
        "/zh/investor/20-year-returns-outlook.html#likelihood-20-year-geometric-returns-portfolio": "Ihlbk",
        "/zh/investor/20-year-returns-outlook.html#likelihood-20-year-annual-returns-portfolio": "eFWkG",
        "/zh/investor/20-year-returns-outlook.html#twenty-year-expected-returns-scenarios": "lfWEU",
        "/zh/investor/20-year-returns-outlook.html#likelihood-20-year-geometric-returns-scenario": "NMEFg",
        "/zh/investor/20-year-returns-outlook.html#likelihood-20-year-annual-returns-scenario": "jIXVw",
        "/zh/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-us": "ohShL",
        "/zh/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-eu": "dTaOM",
        "/zh/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-cn": "AERIr",
        "/zh/investor/20-year-returns-outlook.html#market-index-value-20-year-scenario-sg": "kcGea",
        "/zh/institution/financial-discipline.html#capital-and-liquidity-management": "zvnLC",
        "/zh/institution/financial-discipline.html#liability-management": "idVZe",
        "/zh/institution/financial-discipline.html#foreign-exchange-management": "PObyM",
        "/zh/institution/financial-discipline.html#key-recurring-income-vs-debt-maturity": "KGRgw",
        "/zh/institution/credit-quality.html#total-debt-5-percent-of-net-portfolio-value": "HbTSa",
        "/zh/institution/credit-quality.html#total-debt-12-percent-of-liquid-assets": "FEBXW",
        "/zh/institution/credit-quality.html#interest-expense-4-percent-of-dividend-income": "GiIta",
        "/zh/institution/credit-quality.html#interest-expense-1-percent-of-recurring-income": "LvbGC",
        "/zh/institution/credit-quality.html#total-debt-due-in-one-year-5-percent-of-recurring-income": "CFjMF",
        "/zh/institution/credit-quality.html#total-debt-due-in-next-10-years-18-percent-of-liquidity-balance": "Zdklq",
        "/zh/institution/credit-quality.html#key-credit-parameters": "iXFiQ",
        "/zh/institution/temasek-bonds.html#temasek-bonds-maturity-profile-and-coupon": "SOKCX",
        "/zh/institution/wealth-added.html#illustration-of-wealth-added": "YTAit",
        "/zh/institution/instilling-ownership.html#annual-cash-bonuses": "Rkohq",
        "/zh/institution/instilling-ownership.html#rolling-total-shareholder-return": "ROwRu",
        "/zh/institution/instilling-ownership.html#wa-bonus-bank": "ANNej",
        "/zh/institution/instilling-ownership.html#co-ownership-grants": "KPwca",
        "/zh/institution/instilling-ownership.html#co-ownership-alignment": "pSYoO",
        "/zh/institution/instilling-ownership.html#wa-incentives-of-key-team": "LRZwu",
        "/zh/institution/our-onetemasek-team.html#rooted-in-meritocracy": "plSUZ",
        "/zh/institution/our-onetemasek-team.html#developing-our-people": "Eonti",
        "/zh/institution/our-onetemasek-team.html#an-inclusive-team": "blmKu",
        "/zh/institution/our-onetemasek-team.html#supporting-our-communities": "PWZkl",
        "/zh/institution/our-temasek-heartbeat.html#supporting-our-people": "BMMnK",
        "/zh/institution/our-temasek-heartbeat.html#growing-our-talent": "pCitP",
        "/zh/institution/our-temasek-heartbeat.html#making-a-difference": "eubZg",
        "/zh/institution/our-temasek-heartbeat.html#doing-good-together": "OoDTL",
        "/zh/institution/our-temasek-heartbeat.html#our-staff-composition": "dxSnr",
        "/zh/institution/board-of-directors.html#executive-committee": "RptQY",
        "/zh/institution/board-of-directors.html#audit-committee": "DQnMF",
        "/zh/institution/board-of-directors.html#ldcc": "Actyu",
        "/zh/institution/board-of-directors.html#board-governance": "UGPvK",
        "/zh/institution/board-of-directors.html#board-committee-memberships": "NrfzV",
        "/zh/steward/a-trusted-steward.html#relating-president-singapore": "RyeOg",
        "/zh/steward/a-trusted-steward.html#protection-past-reserves": "ljLxx",
        "/zh/steward/a-trusted-steward.html#relating-shareholder": "tzOta",
        "/zh/steward/a-trusted-steward.html#relating-portfolio-companies": "aNrwK",
        "/zh/steward/a-trusted-steward.html#relating-communities": "SVUUv",
        "/zh/steward/enabling-a-better-world.html#financial-oversight-and-governance": "ODwHs",
        "/zh/steward/enabling-a-better-world.html#temasek-foundation": "oiIBT",
        "/zh/steward/enabling-a-better-world.html#mandai-nature-fund": "ngqXo",
        "/zh/steward/enabling-a-better-world.html#temasek-life-sciences-laboratory-tll": "JUnfa",
        "/zh/steward/making-a-difference.html#empowering-families-to-stay-resilient": "LQvfR",
        "/zh/steward/making-a-difference.html#providing-a-safe-environment-for-children": "wweMc",
        "/zh/steward/making-a-difference.html#a-growing-need-during-the-pandemic": "WzZaN",
        "/zh/steward/making-a-difference.html#building-confidence-and-social-skills": "vyrBS",
        "/zh/steward/making-a-difference.html#adapting-to-the-new-normal": "MXdWf",
        "/zh/steward/touching-lives.html#strengthening-social-resilience-and-uplifting-lives": "oWgLa",
        "/zh/steward/touching-lives.html#fostering-international-exchange-and-enhancing-regional-capabilities": "TSBsV",
        "/zh/steward/touching-lives.html#advancing-science-and-protecting-the-planet-for-a-sustainable-world": "hWtiQ",
        "/zh/steward/rising-above-covid-19.html#testing-and-diagnosis": "ooned",
        "/zh/steward/rising-above-covid-19.html#collaborating-to-improve-testing-capabilities": "NccpW",
        "/zh/steward/rising-above-covid-19.html#containment-and-contact-tracing": "lsLHU",
        "/zh/steward/rising-above-covid-19.html#care-and-treatment": "UcROG",
        "/zh/steward/rising-above-covid-19.html#protection-and-prevention": "xORbv",
        "/zh/steward/rising-above-covid-19.html#enablement": "CpoBg",
        "/zh/steward/fostering-stewardship-and-governance.html#wmi": "nFoyV",
        "/zh/steward/fostering-stewardship-and-governance.html#sac": "KaHqU",
        "/zh/steward/fostering-stewardship-and-governance.html#sim-kee-boon-institute": "phtub",
        "/zh/steward/fostering-stewardship-and-governance.html#imf-santiago-principles": "XtEGR",
        "/zh/steward/sharing-perspectives.html#tip": "bAIsB",
        "/zh/steward/sharing-perspectives.html#trap": "zKmjw",
        "/zh/steward/sharing-perspectives.html#taap": "hGtzH",
        "/zh/steward/sharing-perspectives.html#teap": "sTPao",
        "/zh/steward/sharing-perspectives.html#tan": "udSIw",
        "/zh/our-stories/the-race-against-the-clock-to-net-zero.html#investing-in-tech-to-power-a-cleaner-world": "fLHgu",
        "/zh/our-stories/the-race-against-the-clock-to-net-zero.html#bridging-the-gap-with-carbon-credits": "wElYi",
        "/zh/our-stories/chinas-gen-z-next-normal-consumers.html#a-generation-of-digital-natives-comes-of-age": "maqse",
        "/zh/our-stories/chinas-gen-z-next-normal-consumers.html#emergence-of-new-digital-and-social-channels": "irQJR",
        "/zh/our-stories/chinas-gen-z-next-normal-consumers.html#resilience-powered-by-a-predominantly-digital-economy": "xLUST",
        "/zh/our-stories/paying-it-forward-by-mentoring.html#safe-seamless-and-secure-mask-collection": "dCDVE",
        "/zh/our-stories/paying-it-forward-by-mentoring.html#a-growing-experience-for-both-mentor-and-mentee": "vpJIy",
        "/zh/our-stories/swabs-and-scrubs-a-covid-19-response.html#all-hands-on-deck": "YrUeT",
        "/zh/our-stories/swabs-and-scrubs-a-covid-19-response.html#no-one-size-fits-all-solution": "cCfhR",
        "/zh/our-stories/swabs-and-scrubs-a-covid-19-response.html#getting-from-zero-to-one": "csXaI",
        "/zh/our-stories/swabs-and-scrubs-a-covid-19-response.html#stronger-together": "KsKtP",
        "/zh/our-stories/racing-against-covid-19-to-save-lives.html#the-need-for-speed": "uCrLU",
        "/zh/our-stories/racing-against-covid-19-to-save-lives.html#eye-on-the-mission": "FxKpu",
        "/zh/our-stories/racing-against-covid-19-to-save-lives.html#in-our-dna-to-help": "aYOTL",
        "/zh/our-stories/racing-against-covid-19-to-save-lives.html#the-fight-continues": "GDmwT",
        "/zh/group-financials/adopting-international-accounting-standards.html#adoption-of-ifrs-16-leases-in-2019": "UaLqI",
        "/zh/group-financials/adopting-international-accounting-standards.html#adoption-of-ifrs-9-financial-instruments-in-2018": "yBKCt",
        "/zh/group-financials/adopting-international-accounting-standards.html#simulated-impact-on-temaseks-group-financials": "IzAzG",
        "/zh/group-financials/adopting-international-accounting-standards.html#providing-additional-disclosures": "ZPIqc",
        "/zh/group-financials/adopting-international-accounting-standards.html#no-impact-on-other-measures": "hBjEx",
        "/zh/group-financials/adopting-international-accounting-standards.html#adopting-accounting-standards-over-the-years": "JKaTd",
        "/zh/media-centre/downloads.html#media-conference-materials": "myYTc",
        "/zh/media-centre/downloads.html#photography": "mSTcY",
        "/zh/media-centre/downloads.html#media-conference-video": "yjjKM",
        "/zh/media-centre/downloads.html#press-advertisements": "ADZrT"
    };

    exports.setTinyUrl = function () {
        var relativeUrl = location.pathname + location.search + location.hash;
        var tinyUrlCode = TINY_URL_CODES[relativeUrl];
        var url = location.href;
        if (blacksunplc.sitemaps.isSg() && tinyUrlCode) {
            url =  "https://tmsk.sg/" + tinyUrlCode;
        }
        $(".share-links-menu").attr("data-url", url);
    };

    blacksunplc.tinyurl = freeze(exports);
}());

jQuery(function ($) {
    "use strict";
    var tinyurl = blacksunplc.tinyurl;   // import * as tinyurl      from "./matchtinyurl.js

    tinyurl.setTinyUrl();
});

/*jslint browser: true, fudge: true, long: true, this: true, for: true */
/*global blacksunplc, console, document, history, jQuery, location, window */

jQuery(function ($) {
    "use strict";


    var arrays = blacksunplc.arrays; // import * as arrays   from "module:blacksunplc/arrays"
    var security = blacksunplc.security; // import * as security from "module:blacksunplc/security"

    var $html = $(document.documentElement);
    var $body = $(document.body);
    var $modal = $("body:not(.foreign-languages) .modal");
    var hash = security.safeLocationHash();
    var scrollLocation = 0;

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/showModal
     */
    function showModal(/** !jQuery.Event */ event) {
        var showModalButton = event.currentTarget;

        var buttonData = /** @type {{target: string, slideindex: number}} */ ($(showModalButton).data());
        var idSelector = buttonData.target;
        var slideIndex = buttonData.slideindex;

        var $buttonTarget = $(idSelector);
        if (!$buttonTarget.hasClass("modal")) {
            console.log(idSelector + " no exist");
            return;
        }

        scrollLocation = $(window).scrollTop();
        $body.append("<div class='modal-backdrop' />").hide().fadeIn();
        $buttonTarget.removeClass("is-hidden");
        $html.addClass("is-locked");

        var $slickSlider = $(".slick-slider", $buttonTarget);
        if ($slickSlider.length) {
            $slickSlider.slick("setPosition");
            $slickSlider.slick("slickGoTo", slideIndex);
        } else {
            location.hash = idSelector;
            console.log("modal carousel not exist");
        }

        if ($(document.body).hasClass("homepage")) {
            jQuery.fn.fullpage.setAllowScrolling(false);
        }

        event.preventDefault();
    }

    function hashToggleModal() {
        if (hash) {
            var $targetElement = $("[data-toggle='modal'][data-page=" + hash.slice(1) + "]");
            if ($targetElement.length) {
                var modal = $($targetElement.attr("data-target"));
                if (modal.length && modal.hasClass("modal")) {
                    $body.append("<div class='modal-backdrop' />").hide().fadeIn();
                    $html.addClass("is-locked");
                    modal.removeClass("is-hidden");
                }
            }
        }
    }

    function removeLocationHash() {
        if (history.replaceState) {
            history.replaceState("", document.title, location.pathname + location.search);
        } else {
            /* Prevent scrolling by storing the page's current scroll offset. */
            var scrollV = document.body.scrollTop;
            var scrollH = document.body.scrollLeft;
            location.hash = "";
            document.body.scrollTop = scrollV;
            document.body.scrollLeft = scrollH;
        }
    }

    /**
     * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLDialogElement/close
     */
    function closeModal(/** !jQuery.Event */ event) {
        var closeModalButton = event.currentTarget;

        var correctTarget = false;

        $("html, body").animate({
            "scrollTop": scrollLocation
        }, 300);

        var $modalContents = $(".modal-content", $modal);
        if (!$modalContents.is(event.target) && $modalContents.has(event.target).length === 0) {
            $modal.addClass("is-hidden");
            correctTarget = true;
        } else {
            var $closeButton = $(".modal-content .btn-close", $modal);
            if ($closeButton.is(event.target)) {
                $(closeModalButton).parents(".modal").toggleClass("is-hidden");
                correctTarget = true;
            }
        }

        if (correctTarget) {
            removeLocationHash();
            document.getSelection().removeAllRanges();
            $(".modal-backdrop", $body).fadeOut(
                500, // duration in milliseconds
                /**
                 * A function to call once the animation is complete,
                 * called once per matched element.
                 * @this {!Element} The DOM element being animated.
                 */
                function () {
                    var modalBackdrop = this;
                    $(modalBackdrop).remove();
                    $html.removeClass("is-locked");
                }
            );
        }

        if ($(document.body).hasClass("homepage")) {
            jQuery.fn.fullpage.setAllowScrolling(true);
        }
    }

    var $showModalButtons = $("body:not(.foreign-languages) [data-toggle='modal']");
    if ($showModalButtons.length) {
        arrays.forEach($showModalButtons, function (showModalButton) {
            $(showModalButton).on("click", showModal);
        });
        $(window).one("load", hashToggleModal);
        $(".btn-close", $modal).on("click", closeModal);
        $modal.on("click", closeModal);
    }

});

/*jslint browser: true, fudge: true, long: true, for: true */
/*global blacksunplc, document, is, jQuery, location, setTimeout, window */

jQuery(function ($) {
    "use strict";

    var events = blacksunplc.events; // import * as events        from "module:blacksunplc/events"
    var functions = blacksunplc.functions; // import * as functions     from "module:blacksunplc/functions"
    var security = blacksunplc.security; // import * as security      from "module:blacksunplc/security"
    var cookieconsent = blacksunplc.cookieconsent; // import * as cookieconsent from "./cookieconsent-tr.js"
    var quicknav = blacksunplc.quicknav; // import * as quicknav      from "./share-link-common.js"
    var tinyurl = blacksunplc.tinyurl;  // import * as tinyurl      from "./matchtinyurl.js"

    var hash = security.safeLocationHash();

    var HEADER_WAYPOINT_OFFSET = 240;

    /**
     * @param {function ():number} offsetCallback
     * @param {(function ())=} complete
     */
    function scrollPageTo(offsetCallback, complete) {

        var offset = offsetCallback();
        if (offset > HEADER_WAYPOINT_OFFSET) {
            offset -= 80;
        }
        var pageYOffset = window.pageYOffset;
        var delta = Math.abs(pageYOffset - offset);
        if (delta < 8) {
            if (complete) {
                complete();
            }
            return;
        }
        var duration = Math.min(delta, 600);

        setTimeout(function () {
            $({"pageYOffset": pageYOffset}).animate({"pageYOffset": offset}, {
                "duration": duration,
                "easing": "linear",
                "step": function (/** number */ now) {
                    window.scrollTo(0, now);
                },
                "complete": function () {
                    scrollPageTo(offsetCallback, complete);
                }
            });
        }, 500);

    }

    function initializeSiteSearch() {
        var $bodyElement = $(document.body);
        var cachedWidth = $(window).width(); // Samsung input focus, keyboard resizing hack
        var cachedHeight = $(window).height();

        var isMobile = is.iphone() || !is.androidPhone();

        function listener() {
            var $browserWindow = $(window);

            if ($browserWindow.width() !== cachedWidth && (!isMobile || (isMobile && $browserWindow.height() !== cachedHeight))) {

                if ($bodyElement.hasClass("search-active")) {
                    $bodyElement.removeClass("search-active");
                    $(".search").removeClass("active");
                    $(".search").css("min-width", 0);
                }

                cachedWidth = $browserWindow.width();
                cachedHeight = $browserWindow.height();
            }
        }

        /* Debounced to run at most one per 100ms. */
        events.add(window, "resize", functions.debounce(listener, 100));

        var $searchText = $(".search-text");
        if ($searchText.length > 0 && $searchText.val() !== "") {
            $(".search").addClass("active");
            $(document.body).addClass("search-active");
        }

        $(".search-button").on("click", function (/** !jQuery.Event */ event) {
            event.preventDefault();

            var $searchButton = $(event.currentTarget);
            var $search = $searchButton.closest(".search");

            if ($(".search-text", $search).val() !== "") {
                $(".search-form", $search).trigger("submit");
                return;
            }

            $search.toggleClass("active");
            $(document.body).toggleClass("search-active");

            var hasMobileLinks = $searchButton.closest(".mobile-links").length > 0;

            if ($search.is(".active")) {
                if (hasMobileLinks) {
                    var mainNavWidth = /** @type {number} */ ($(".main-navigation").width());
                    $search.css("min-width", (mainNavWidth - 32) + "px");
                }
                var $input = $("input[name='q']", $search);
                $input.trigger("focus");
            } else if (hasMobileLinks) {
                $search.css("min-width", 0);
            }
        });
    }

    /**
     * Do not use this function, it will causing when you click the inner
     * container hide the dropdown menu as well.
     */
    function initializeSiteShare() {

        $(".share .tool-share").on("click", function (/** !jQuery.Event */ event) {
            var $toolShare = $(event.currentTarget);

            /* When share button is clicked hide cookie pop up. */
            cookieconsent.dismiss();

            var $quicklinks = $toolShare.closest(".quicklinks");
            $(".quicknav.active", $quicklinks).removeClass("active");

            /* Prevent if in the contentpage quicklink and main-header share overlap issue. */
            if ($toolShare.parents(".main-header").length) {
                $(".quicklinks .share").removeClass("active");
            } else {
                $(".main-header .share").removeClass("active");
            }

            $toolShare.parents(".share").toggleClass("active");

            event.stopPropagation();
        });

        /* Click outside of share dismiss dropdown. */
        $(document).on("click", function (/** !jQuery.Event */ event) {
            var $sharelink = $(".tools .share.sharelink");
            if (!$sharelink.is(event.target) && $sharelink.has(event.target).length === 0) {
                $sharelink.removeClass("active");
            }
        });
    }

    function initializeSiteScrollTop() {
        $(".back-to-top").on("click", function () {
            $("html, body").animate({"scrollTop": 0}, 600);
        });
    }

    function initializeQuickLinksNav() {
        $(".quicknav-links").on("click", "a", function (/** !jQuery.Event */ event) {
            var quicknavLink = /** @type {!HTMLAnchorElement} */ (event.currentTarget);
            if (quicknavLink.hash !== "") {
                event.preventDefault();

                hash = quicknavLink.hash;

                scrollPageTo(
                    /** @return {number} */
                    function () {
                        return $(hash).offset().top;
                    },
                    function () {
                        if (window.history && window.history.pushState) {
                            window.history.pushState(null, "", hash);
                        } else {
                            location.hash = hash;
                        }
                        tinyurl.setTinyUrl();
                    }
                );

                if (window._quickNavHandlers != null) {
                    var index;
                    var handler;
                    for (index = 0; index < window._quickNavHandlers.length; index += 1) {
                        handler = window._quickNavHandlers[index];
                        if (typeof handler === "function") {
                            handler(quicknavLink);
                        }
                    }
                }

                quicknav.handle(quicknavLink);
            }
        });
    }

    function initialHashScrollDown() {
        if ($(hash).length) {
            scrollPageTo(
                /** @return {number} */
                function () {
                    return $(hash).offset().top;
                });
        }
    }

    function initializeQuickLinksPopup() {
        $(".quicknav-button").on("click", function (/** !jQuery.Event */ event) {
            var $quicknavButton = $(event.currentTarget);
            $quicknavButton.parent().toggleClass("active");
            var $quicklinks = $quicknavButton.closest(".quicklinks");
            $(".sharelink.active", $quicklinks).removeClass("active");
        });
    }

    if (is.ie() || is.edge()) {
        $(document.body).addClass("ie");
    }

    if (is.ie()) {
        $(document.body).addClass("ie-not-edgy");
    }

    if (is.edge()) {
        $(document.body).addClass("ie-edgy");
    }

    initializeSiteSearch();
    initializeSiteShare();
    initializeSiteScrollTop();
    initializeQuickLinksNav();
    initializeQuickLinksPopup();
    initialHashScrollDown();

});

/** @module blacksunplc/quicknav */
(function () {
    "use strict";

    var objects = blacksunplc.objects; // import * as objects from "module:blacksunplc/objects"
    var arrays = blacksunplc.arrays; // import * as arrays  from "module:blacksunplc/arrays"

    /** @type {!Array<function (!HTMLAnchorElement)>} */
    var handlers = [];

    var exports = {};

    /**
     * @param {function (!HTMLAnchorElement)} handler
     */
    exports.add = function (handler) {
        handlers.push(handler);
    };

    /**
     * @param {!HTMLAnchorElement} quicknavLink
     */
    exports.handle = function (quicknavLink) {
        arrays.forEach(handlers, function (handler) {
            handler(quicknavLink);
        });
    };

    blacksunplc.quicknav = objects.freeze(exports);

}());

window._quickNavHandlers = [];
window.addQuickNavHandler = function (callback) {
    "use strict";
    window._quickNavHandlers.push(callback);
};

/*jslint browser: true, fudge: true, long: true */
/*global $, blacksunplc, document, encodeURIComponent, is, jQuery, location, window */

/** @module blacksunplc/sharelink */
(function () {
    "use strict";

    var objects = blacksunplc.objects; // import * as objects from "module:blacksunplc/objects"

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     * @param {string=} metablock
     * @return {{url: string, title: string, text: string, getText: function ():string}}
     */
    function ensureData(sender, data, metablock) {

        if (!data) {
            data = {};
        }

        var $sender = $(sender || document);

        var defaultUrl = /** @type {string} */ ($sender.data("url"));
        var defaultDescription = /** @type {string} */ ($sender.data("description"));
        var defaultTitle = /** @type {string} */ ($sender.data("title"));

        if (metablock) {
            switch (metablock.toLowerCase()) {

            case "og":
            case "og:":
            case "opengraph":
                defaultUrl = defaultUrl || /** @type {string} */ ($("meta[name='og:url']").attr("content"));
                defaultTitle = defaultTitle || /** @type {string} */ ($("meta[name='og:title']").attr("content"));
                defaultDescription = defaultDescription || /** @type {string} */ ($("meta[name='og:description']").attr("content"));
                break;

            case "twitter":
            case "twitter:":
                defaultUrl = defaultUrl || /** @type {string} */ ($("meta[name='twitter:url']").attr("content"));
                defaultTitle = defaultTitle || /** @type {string} */ ($("meta[name='twitter:title']").attr("content"));
                defaultDescription = defaultDescription || /** @type {string} */ ($("meta[name='twitter:description']").attr("content"));
                break;

            }
        }

        defaultTitle = defaultTitle || document.title;
        defaultDescription = defaultDescription || /** @type {string} */ ($("meta[name='description']").attr("content"));
        defaultUrl = defaultUrl || location.href;

        var rv = {
            "url": data.url || defaultUrl,
            "title": data.title || defaultTitle,
            "text": data.text || defaultDescription
        };

        /** @return {string} */
        rv.getText = function () {

            if (rv.text !== null) {
                return rv.text + " #TemasekReview";
            }

            if ($("html[lang='zh']").length) {
                return "\u6b32\u77e5\u66f4\u591a\u5173\u4e8e\"\u6de1\u9a6c\u9521\"\u8be6\u60c5,\u8bf7\u67e5\u9605 #TemasekReview 2021";
            }

            return "Find out more about Temasek from #TemasekReview 2021";
        };

        return rv;
    }

    var exports = {};

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.mail = function (sender, data) {
        var d = ensureData(sender, data);

        if (d.text.length > 1000) {
            d.text = d.text.substring(0, 996) + "...";
        }

        var body = d.getText() + "\r\n\r\n" + d.title + "\r\n" + d.url;
        window.location.href = "mailto:?subject=" + encodeURIComponent(d.title) + "&body=" + encodeURIComponent(body);
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.facebook = function (sender, data) {
        var d = ensureData(sender, data, "og");
        window.open(
            "https://www.facebook.com/sharer/sharer.php?u=" + encodeURIComponent(d.url),
            "shareWindow",
            "width=700,height=500,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.twitter = function (sender, data) {
        var d = ensureData(sender, data, "twitter");
        window.open(
            "https://twitter.com/intent/tweet?url=" + encodeURIComponent(d.url) +
            "&text=" + encodeURIComponent(d.getText()),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.linkedIn = function (sender, data) {
        var d = ensureData(sender, data);
        window.open(
            "https://www.linkedin.com/shareArticle?source=www.temasekreview.com.sg" +
            "&title=" + encodeURIComponent(d.title) +
            "&summary=" + encodeURIComponent(d.getText()) +
            "&url=" + d.url,
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.whatsApp = function (sender, data) {
        var d = ensureData(sender, data);
        var message = d.getText() + " - " + d.url;

        if (is.desktop()) {
            window.open(
                "https://web.whatsapp.com/send?text=" + encodeURIComponent(message),
                "shareWindow",
                "width=700,height=500,top=50,left=50"
            );
        } else {
            window.open("whatsapp://send?text=" + encodeURIComponent(message));
        }
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.telegram = function (sender, data) {
        var d = ensureData(sender, data);
        var message = d.getText() + " - " + d.url;

        window.open(
            "https://t.me/share/url?url=" + encodeURIComponent(message),
            "shareWindow",
            "width=700,height=500,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.google = function (sender, data) {
        var d = ensureData(sender, data);
        window.open(
            "https://plus.google.com/share?url=" + encodeURIComponent(d.url),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.sina = function (sender, data) {
        var d = ensureData(sender, data); // Note Should the unused `sender` parameter be the first argument to `ensureData`?
        window.open(
            "https://service.weibo.com/share/share.php?url=" + encodeURIComponent(d.url) + "&title=" + encodeURIComponent(d.title),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.tencent = function (sender, data) {
        var d = ensureData(sender, data);
        window.open(
            "https://v.t.qq.com/share/share.php?url=" + encodeURIComponent(d.url) + "&title=" + encodeURIComponent(d.title),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.qzone = function (sender, data) {
        var d = ensureData(sender, data);
        window.open(
            "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=" + encodeURIComponent(d.url),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.wechat = function (sender, data) {
        var d = ensureData(sender, data);
        window.open(
            "//weixin:/url=" + encodeURIComponent(d.url),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.renren = function (sender, data) {
        var d = ensureData(sender, data);
        window.open(
            "https://share.renren.com/share/buttonshare?link=" + encodeURIComponent(d.url) + "&title=" + encodeURIComponent(d.title),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    /**
     * @param {!Element} sender
     * @param {{url: (string|undefined), title: (string|undefined), text: (string|undefined)}=} data
     */
    exports.pengyou = function (sender, data) {
        var d = ensureData(sender, data);
        window.open(
            "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?to=pengyou&url=" + encodeURIComponent(d.url) + "&title=" + encodeURIComponent(d.title),
            "shareWindow",
            "width=500,height=300,top=50,left=50"
        );
    };

    blacksunplc.sharelink = objects.freeze(exports);

}());

jQuery(function ($) {
    "use strict";

    var sharelink = blacksunplc.sharelink; // import * as sharelink from "./sharelink.js"

    /**
     * @param {!Element} sender
     * @return {string}
     */
    function getUrl(sender) {
        return /** @type {string} */ ($(sender).parents(".share-links-menu").attr("data-url"));
    }

    var $menu = $(".share-links-menu");

    $("li.facebook", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.facebook(sender, {"url": getUrl(sender)});
    });

    $("li.twitter", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.twitter(sender, {"url": getUrl(sender)});
    });

    $("li.linkedin", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.linkedIn(sender, {"url": getUrl(sender)});
    });

    $("li.google", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.google(sender, {"url": getUrl(sender)});
    });

    $("li.wechat", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.wechat(sender, {"url": getUrl(sender)});
    });

    $("li.whatsapp", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.whatsApp(sender, {"url": getUrl(sender)});
    });

    $("li.telegram", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.telegram(sender, {"url": getUrl(sender)});
    });

    $("li.sina", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.sina(sender, {"url": getUrl(sender)});
    });

    $("li.tencent", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.tencent(sender, {"url": getUrl(sender)});
    });

    $("li.email", $menu).on("click", function (/** !jQuery.Event */ event) {
        var sender = event.currentTarget;
        sharelink.mail(sender, {"url": getUrl(sender)});
        event.preventDefault();
        event.stopPropagation();
    });

});

/*jslint browser: true, fudge: true, long: true */
/*global Waypoint, blacksunplc, jQuery, window, console */

(function() {
    "use strict";

    var jsonml = blacksunplc.jsonml; // import * as jsonml     from "module:blacksunplc/jsonml"

    var CACHED_FILES = 1598;
    var isInstalled = false;
    var isBefore = false;
    var isLoaded = false;
    var deferredPrompt;
    var swOverly = document.querySelector(".sw-overly");
    var addBtn = document.querySelector(".home-screen-button");
    var spinner = document.querySelector(".tr-spinnner");
    if (addBtn) {
        addBtn.style.display = "none";
    }
    // Firefox 1.0+
    var isFirefox = typeof InstallTrigger !== "undefined";

    // Safari 3.0+ "[object HTMLElementConstructor]"
    var isSafari = /constructor/i.test(window.HTMLElement) || (function(p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window["safari"] || (typeof safari !== "undefined" && safari.pushNotification));

    var isMobileSafari = navigator.userAgent.match(/(iPod|iPhone|iPad)/) && navigator.userAgent.match(/AppleWebKit/)

    // Internet Explorer 6-11
    var isIE = /*@cc_on!@*/ false || !!document.documentMode;

    function hideInstallPromotion() {
        if (swOverly) {
            swOverly.style.display = "none";
        }
    }

    function displayMessageForSafari() {
        var isMessageClosed = localStorage.getItem("messageClosed");
        var markup = ["div", { class: "add-to-home-screen-message" },
            ["button", "close"],
            "This website is ready to install on your device.", ["br", { class: "br-small" }],
            "Tap the Share icon and then select Add to Home Screen"
        ];
        if (!isMessageClosed) {
            jsonml.append(document.body, markup);

            $("body").on("click", "button", function() {
                document.querySelector(".add-to-home-screen-message").style.display = "none";
                localStorage.setItem("messageClosed", true);
            })
        }
    }

    function checkPWADisplayMode(status) {
        var isStandalone = window.matchMedia("(display-mode: standalone)").matches;
        console.log("installed:", isInstalled, "status:", status);
        if (navigator.standalone || isStandalone) {
            if (isLoaded && status === "ready") {
                hideInstallPromotion();
                console.log("standalone");
            }
            return;
        } else if (isIE) {
            hideInstallPromotion();
            console.error("no prompts for browser");
            return;
        } else if (isFirefox) {
            if (status === "reject" || status === "ready") {
                hideInstallPromotion();
                console.error("Browser rejected or ready");
            }
            return;
        } else if (isSafari || isMobileSafari) {
            if (status === "ready") {
                hideInstallPromotion();
                displayMessageForSafari();
                console.error("no prompts for browser");
            }
            return;
        }
        console.log("browser");
        if (!isBefore && status === "ready") {
            setTimeout(function() {
                hideInstallPromotion();
                console.error("Browser ready timeout");
            }, 60 * 1000);
        }
    }

    function doRegister() {
        var path = "/web/sw.js",
            scope = "/";
        navigator.serviceWorker.register(path, { scope: scope }).then(waitUntilInstalled);
    }

    function cacheCheck(registration) {
        caches.keys().then(function(cacheList) {
            var key = cacheList.find(function(key) {
                return key.startsWith("TR21-precache-v2-");
            });
            caches.open(key).then(function(cache) {
                cache.keys().then(function(kList) {
                    if (kList.length !== CACHED_FILES) {
                        console.error("recache");
                        registration.unregister().then(function(done) {
                            if (done) {
                                caches.delete(key);
                                window.location.reload();
                            }
                        });
                    }
                })
            });
        });
    }

    function waitUntilInstalled(registration) {
        console.log("ServiceWorker registration successful with scope: ", registration.scope);
        return new Promise(function(resolve, reject) {
            if (registration.installing) {
                console.debug("Installing");
                registration.installing.addEventListener("statechange", function(e) {
                    if (e.target.state === "installed") {
                        console.debug("Installed");
                        resolve();
                    } else if (e.target.state === "redundant") {
                        console.debug("reject");
                        checkPWADisplayMode("reject");
                        reject();
                    } else if (e.target.state === "activated") {
                        console.debug("activated");
                        checkPWADisplayMode("ready");
                    } else {
                        console.debug("New State:", e.target.state);
                    }
                });
            } else {
                resolve();
                cacheCheck(registration);
            }
        });
    }

    if ("serviceWorker" in navigator) {
        navigator.serviceWorker.ready.then(function() {
            checkPWADisplayMode("ready");
        });

        if (!navigator.serviceWorker.controller) {
            if (swOverly) { swOverly.style.display = "flex"; }
            console.error("This page is not currently controlled by a service worker.");
        }
        doRegister();

        window.addEventListener("load", function() {
            window.addEventListener("beforeinstallprompt", function(event) {
                console.log("before install");
                isBefore = true;
                var addButton = document.querySelector(".home-screen-button");
                if (addButton) {
                    event.preventDefault();
                    deferredPrompt = event;
                    addButton.style.display = "block";
                    spinner.style.display = "none";

                    addBtn.addEventListener("click", function() {
                        addBtn.style.display = "none";
                        deferredPrompt.prompt();
                        deferredPrompt.userChoice.then(function(choiceResult) {
                            checkPWADisplayMode("install");
                            if (choiceResult.outcome === "accepted") {
                                console.log("User accepted the A2HS prompt");
                            } else {
                                console.log("User dismissed the A2HS prompt");
                            }
                            deferredPrompt = null;
                        });
                    });
                }
            });

            checkPWADisplayMode("load");
            isLoaded = true;
        });
    }

    window.addEventListener("appinstalled", function() {
        // Hide the app-provided install promotion
        hideInstallPromotion();
        // Clear the deferredPrompt so it can be garbage collected
        deferredPrompt = null;
        // Optionally, send analytics event to indicate successful install
        console.log("PWA was installed");
        isInstalled = true;
    });

    function handleNetworkChange(event) {
        if (navigator.onLine) {
            document.body.classList.remove("offline");
        } else {
            document.body.classList.add("offline");
        }
    }

    if (!navigator.onLine) {
        document.body.classList.add("offline");
    }
    window.addEventListener("online", handleNetworkChange);
    window.addEventListener("offline", handleNetworkChange);

})();
/*jslint browser: true, fudge: true, long: true, this: true */
/*global $, blacksunplc, document, hapyak, jQuery, setTimeout, videojs, window */

(function () {
    "use strict";


    var arrays = blacksunplc.arrays; // import * as arrays   from "module:blacksunplc/arrays"
    var events = blacksunplc.events; // import * as events   from "module:blacksunplc/events"
    var security = blacksunplc.security; // import * as security from "module:blacksunplc/security"

    var chinese = $("html[lang='zh']").length !== 0;

    var brightcoveData = {
        "account": "4922155157001",
        "player": "ryFCfJxS",
        "embed": "default",
        "width": 720,
        "height": 405
    };

    /**
     * @const {!Object<{
     *     hapyakid: string,
     *     languagecode: string,
     *     viewer: {apiKey: string, projectId: number}
     * }>}
     */
    var hapyakVideos = {
        "6180754614001": {
            "hapyakid": "hapyak-player-290907-2176",
            "languagecode": "en",
            "viewer": {
                "apiKey": "534e1c72786546848319",
                "projectId": 360937
            }
        },
        "6180745635001": {
            "hapyakid": "hapyak-player-290427-5762",
            "languagecode": "en",
            "viewer": {
                "apiKey": "534e1c72786546848319",
                "projectId": 360936
            }
        },
        "6180750258001": {
            "hapyakid": "hapyak-player-290599-7526",
            "languagecode": "zh",
            "viewer": {
                "apiKey": "534e1c72786546848319",
                "projectId": 360935
            }
        }
    };

    /**
     * @param {string} videoid
     * @param {!jQuery} $videoContainer
     */
    function initVideo(videoid, $videoContainer) {

        var hapyakData = hapyakVideos[videoid];
        var vjs = videojs("vjs" + videoid);

        function initSocialPanel() {
            var video = videojs("vjs" + videoid);
            video.social({
                "embedCode": chinese ? "视频版权 © 2019淡马锡控股 (私人) 有限公司" : "All videos copyright © 2019 Temasek Holdings (Private) Limited",
                "deeplinking": true,
                "offset": "00:00:00",
                "services": {
                    "facebook": true,
                    "google": true,
                    "twitter": true,
                    "tumblr": false,
                    "pinterest": false,
                    "linkedin": true
                }
            });
            var hash = security.safeLocationHash();
            var offsetTime = hash.match(/[0-9]+/g);
            if (offsetTime) {
                video.currentTime(offsetTime);
            }
        }

        function initHapyak() {
            //            vjs.one("loadedmetadata", function () {
            /* Note The `trackId` property is not marked "optional" for the Viewer API at https://www.hapyak.com/docs/#Options */
            hapyak.viewer({
                "environment": "production",
                "logLevel": "warn",
                "apiKey": hapyakData.viewer.apiKey,
                "projectId": hapyakData.viewer.projectId,
                "plugins": {
                    "annotationSources": {"brightcove.cuepoints": true}
                },
                "resetVariables": true,
                "player": vjs,
                "playerType": "brightcove-v2",
                "autoplay": false
            });
            //            });
        }

        if (hapyakData) {
            /* NOTE: The callback is fired once the script has been loaded but not necessarily executed. */
            jQuery.getScript("//d2qrdklrsxowl2.cloudfront.net/js/hapyak.js", initHapyak);
        }

        vjs.ready(
            /** @this {!videojs.Player} */
            function () {
                var player = this;
                var el = player.el_;
                var mainHeaderHeight = /** @type {number} */ ($(".main-header").height());
                var elOffsetTop = $(el).offset().top;

                initSocialPanel();
                $videoContainer.addClass("hapyak-video-loaded");

                /* Force browser scroll to video offset top to prevent iPad exit screen improper jump scroll issue. */
                if ($(".contentpage").length) {

                    events.add(el, "fullscreenchange", function () {
                        // https://codepen.io/team/rcrooks1969/pen/JGEdEd
                        // Use of setTimeout() temporary measure until bug in fullscreenchange event corrected
                        setTimeout(function () {
                            if (!player.isFullscreen()) {
                                $("html, body").animate({"scrollTop": elOffsetTop - mainHeaderHeight - 40});
                                //                                console.log('exit');
                                //                            } else {
                                //                                console.log('enter');
                            }
                        }, 100);
                    });
                }
            });
    }

    /**
     * @param {string} videoid
     * @param {!jQuery} $videoContainer
     * @param {boolean} autoPlay
     */
    function insertVideo(videoid, $videoContainer, autoPlay) {
        if ($("#vjs" + videoid, $videoContainer).length) {
            /* The video is already on the stage. */
            return;
        }
        var htmlString =
            "<video id='vjs" + videoid + "' " +
            "data-account='" + brightcoveData.account + "' " +
            "data-player='ryFCfJxS'" +
            "data-embed='default'" +
            "data-video-id='" + videoid + "' " +
            "class='video-js' playsinline='playsinline' controls " +
            (autoPlay ? "autoplay " : "") +
            " width='" + brightcoveData.width + "' height='" + brightcoveData.height + "'>" +
            "</video>";
        $(htmlString).appendTo($videoContainer);

        /* NOTE: The callback is fired once the script has been loaded but not necessarily executed. */
        jQuery.getScript("//players.brightcove.net/" + brightcoveData.account + "/ryFCfJxS_default/index.min.js", function () {
            initVideo(videoid, $videoContainer);
        });
    }

    function initVideoOverlay() {

        /** @param {string} videoid */
        function populateVideoOverlay(videoid) {
            var $overlay = $("#overlay");
            if ($("#video-panel-" + videoid, $overlay).length) {
                /* Video panel is already on stage. */
                return;
            }
            var htmlString =
                "<div id='video-panel-" + videoid + "' class='video-container-popup'>" +
                "<div class='video-container-inner'></div>" +
                "</div>";
            $(htmlString).appendTo($("#overlay .video-wrapper"));
        }

        function closeVideoOverlay() {
            var $activePopup = $(".video-container-popup.active");
            if (!$(".vjs-social-overlay", $activePopup).hasClass("vjs-hidden")) {
                var $children = $(".video-container-inner", $activePopup).children();
                var playerId = /** @type {string} */ ($children.attr("id"));
                if (playerId) {
                    videojs(playerId).socialOverlay.close();
                }
            } else {
                var $video = $("video", $activePopup);
                if ($video.length) {
                    var video = /** @type {!HTMLMediaElement} */ ($video.get(0));
                    video.pause();
                }
                $("#overlay").removeClass("active");
                $activePopup.removeClass("active");
                $("#overlay .media-close").hide();
            }
        }

        var $body = $(document.body);

        $body.on("click touchend", ".media-open", function (/** !jQuery.Event */ event) {
            event.preventDefault();

            if (navigator.onLine) {
                var $link = $(event.currentTarget);
                var videoid = /** @type {(string|undefined)} */ ($link.data("video-id"));

                if (!videoid) {
                    event.stopPropagation();
                    return;
                }

                populateVideoOverlay(videoid);

                $("#overlay .media-close").show();
                $("#overlay").addClass("active");

                var $videoPopup = $("#video-panel-" + videoid);
                $videoPopup.addClass("active");
                var $videoContainer = $(".video-container-inner", $videoPopup);

                var autoPlay = true;

                insertVideo(videoid, $videoContainer, autoPlay);
            } else {
                alert("You are offline. Please connect to internet to play this video.")
            }
        });

        $body.on("click touchend", ".media-close, .video-overly", function (/** !jQuery.Event */ event) {
            if (event.target === event.currentTarget) {
                event.preventDefault();
                closeVideoOverlay();
                event.stopPropagation();
            }
        });

        $(document).on("keyup", function (/** !jQuery.Event */ event) {
            if (event.keyCode === 27) {
                closeVideoOverlay();
            }
        });
    }

    function initPageVideos() {
        if ($(".video-container-inner", document.body).length) {

            arrays.forEach($(".video-container-inner"), function (videoContainer) {

                var $videoContainer = $(videoContainer);
                var videoid = /** @type {(string|undefined)} */ ($videoContainer.data("video-id"));

                if (videoid) {
                    var autoPlay = false;
                    insertVideo(videoid, $videoContainer, autoPlay);
                }
            });
        }
    }

    jQuery(function () {
        /* Remove hapyak js in snippets-from-temasek-review-2020.html */
        if ($(document.body).hasClass("media-centre-videos")) {
            delete hapyakVideos["6180754614001"];
        }

        initVideoOverlay();
        initPageVideos();
    });

    function unHideVideos() {
        $("video").removeClass("hide");
    }

    $(window).one("load", unHideVideos);

}());

//# sourceMappingURL=all.min.js.map
