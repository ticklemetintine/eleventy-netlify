(function(r){function u(a,d,g){a.addEventListener(d,g,!1)}function T(a,d,g){a.removeEventListener(d,g,!1)}function U(){var a=["moz","webkit","o","ms"],d;for(d=0;d<a.length&&!q;d+=1)q=window[a[d]+"RequestAnimationFrame"];q||h("setup","RequestAnimationFrame not supported")}function V(a){var b="Host page: "+a;window.top!==window.self&&(b=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+a:"Nested host page: "+a);return b}function h(b,d){A("log",b,d,a[b]?a[b].log:B)}function p(a,
d){A("warn",a,d,!0)}function A(a,d,g,c){if(!0===c&&"object"===typeof window.console)console[a]("[iFrameSizer]["+V(d)+"]",g)}function W(b){function d(){c("Height");c("Width");F(function(){G(k);H(f);v(f,"onResized",k)},k,"init")}function g(){var b=n.substr(13).split(":");return{iframe:a[b[0]]&&a[b[0]].iframe,id:b[0],height:b[1],width:b[2],type:b[3]}}function c(b){var d=Number(a[f]["max"+b]),e=Number(a[f]["min"+b]);b=b.toLowerCase();var c=Number(k[b]);h(f,"Checking "+b+" is in range "+e+"-"+d);c<e&&
(c=e,h(f,"Set "+b+" to min value"));c>d&&(c=d,h(f,"Set "+b+" to max value"));k[b]=""+c}function w(){function c(){function b(){var a=0,b=!1;for(h(f,"Checking connection is from allowed list of origins: "+e);a<e.length;a++)if(e[a]===d){b=!0;break}return b}function c(){var b=a[f]&&a[f].remoteHost;h(f,"Checking connection is from: "+b);return d===b}return e.constructor===Array?b():c()}var d=b.origin,e=a[f]&&a[f].checkOrigin;if(e&&"null"!==""+d&&!c())throw Error("Unexpected message received from: "+d+
" for "+k.iframe.id+". Message was: "+b.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}function r(){var a=k.type in{"true":1,"false":1,undefined:1};a&&h(f,"Ignoring init message from meta parent page");return a}function q(a){h(f,"onMessage passed: {iframe: "+k.iframe.id+", message: "+a+"}");a={iframe:k.iframe,message:JSON.parse(a)};v(f,"onMessage",a);h(f,"--")}function e(a,b){X(function(){var e=m;var d=document.body.getBoundingClientRect();
var c=k.iframe.getBoundingClientRect();d=JSON.stringify({iframeHeight:c.height,iframeWidth:c.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(c.top-d.top,10),offsetLeft:parseInt(c.left-d.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,
windowWidth:window.innerWidth});e("Send Page Info","pageInfo:"+d,a,b)},32,b)}function C(){function b(b,f){function C(){a[c]?e(a[c].iframe,c):d()}["scroll","resize"].forEach(function(a){h(c,b+a+" listener for sendPageInfo");f(window,a,C)})}function d(){b("Remove ",T)}var c=f;b("Add ",u);a[c]&&(a[c].stopPageInfo=d)}function Y(){var a=!0;null===k.iframe&&(p(f,"IFrame ("+k.id+") not found"),a=!1);return a}function I(a){a=a.getBoundingClientRect();J(f);return{x:Math.floor(Number(a.left)+Number(l.x)),y:Math.floor(Number(a.top)+
Number(l.y))}}function K(a){var b=a?I(k.iframe):{x:0,y:0},c={x:Number(k.width)+b.x,y:Number(k.height)+b.y};h(f,"Reposition requested from iFrame (offset x:"+b.x+" y:"+b.y+")");if(window.top!==window.self)if(window.parentIFrame)window.parentIFrame["scrollTo"+(a?"Offset":"")](c.x,c.y);else p(f,"Unable to scroll to requested position, window.parentIFrame not found");else l=c,t(),h(f,"--")}function t(){!1!==v(f,"onScroll",l)?H(f):l=null}function x(a){a=a.split("#")[1]||"";var b=decodeURIComponent(a);
(b=document.getElementById(b)||document.getElementsByName(b)[0])?(b=I(b),h(f,"Moving to in page link (#"+a+") at x: "+b.x+" y: "+b.y),l={x:b.x,y:b.y},t(),h(f,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(a):h(f,"In page link #"+a+" not found and window.parentIFrame not found"):h(f,"In page link #"+a+" not found")}function y(b){var c=!0;a[b]||(c=!1,p(k.type+" No settings for "+b+". Message was: "+n));return c}function z(){for(var b in a)m("iFrame requested init",
L(b),document.getElementById(b),b)}var n=b.data,k={},f=null;if("[iFrameResizerChild]Ready"===n)z();else if("[iFrameSizer]"===(""+n).substr(0,13)&&n.substr(13).split(":")[0]in a){if(k=g(),f=k.id,a[f]&&(a[f].loaded=!0),!r()&&y(f)&&(h(f,"Received: "+n),Y()&&w()))switch(a[f]&&a[f].firstRun&&a[f]&&(a[f].firstRun=!1),k.type){case "close":a[f].closeRequeston?v(f,"onCloseRequest",a[f].iframe):D(k.iframe);break;case "message":q(n.substr(n.indexOf(":")+7+6));break;case "scrollTo":K(!1);break;case "scrollToOffset":K(!0);
break;case "pageInfo":e(a[f]&&a[f].iframe,f);C();break;case "pageInfoStop":a[f]&&a[f].stopPageInfo&&(a[f].stopPageInfo(),delete a[f].stopPageInfo);break;case "inPageLink":x(n.substr(n.indexOf(":")+7+9));break;case "reset":M(k);break;case "init":d();v(f,"onInit",k.iframe);break;default:d()}}else A("info",f,"Ignored: "+n,a[f]?a[f].log:B)}function v(b,d,g){var c=null;if(a[b])if(c=a[b][d],"function"===typeof c)c=c(g);else throw new TypeError(d+" on iFrame["+b+"] is not a function");return c}function N(b){delete a[b.id]}
function D(a){var b=a.id;h(b,"Removing iFrame: "+b);try{a.parentNode&&a.parentNode.removeChild(a)}catch(g){p(g)}v(b,"onClosed",b);h(b,"--");N(a)}function J(a){null===l&&(l={x:window.pageXOffset!==r?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==r?window.pageYOffset:document.documentElement.scrollTop},h(a,"Get page position: "+l.x+","+l.y))}function H(a){null!==l&&(window.scrollTo(l.x,l.y),h(a,"Set page position: "+l.x+","+l.y),l=null)}function M(a){h(a.id,"Size reset requested by "+
("init"===a.type?"host page":"iFrame"));J(a.id);F(function(){G(a);m("reset","reset",a.iframe,a.id)},a,"reset")}function G(b){function d(a){b.id?(b.iframe.style[a]=b[a]+"px",h(b.id,"IFrame ("+g+") "+a+" set to "+b[a]+"px")):h("undefined","messageData id not set");O||"0"!==b[a]||(O=!0,h(g,"Hidden iFrame detected, creating visibility listener"),Z())}var g=b.iframe.id;a[g]&&(a[g].sizeHeight&&d("height"),a[g].sizeWidth&&d("width"))}function F(a,d,g){g!==d.type&&q?(h(d.id,"Requesting animation frame"),
q(a)):a()}function m(b,d,g,c,w){function l(){var e=a[c]&&a[c].targetOrigin;h(c,"["+b+"] Sending msg to iframe["+c+"] ("+d+") targetOrigin: "+e);g.contentWindow.postMessage("[iFrameSizer]"+d,e)}function m(){function b(){!a[c]||a[c].loaded||e||(e=!0,p(c,"IFrame has not responded within "+a[c].warningTimeout/1E3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}
w&&a[c]&&a[c].warningTimeout&&(a[c].msgTimeout=setTimeout(b,a[c].warningTimeout))}var e=!1;c=c||g.id;a[c]&&(g&&"contentWindow"in g&&null!==g.contentWindow?l():p(c,"["+b+"] IFrame("+c+") not found"),m())}function L(b){return b+":"+a[b].bodyMarginV1+":"+a[b].sizeWidth+":"+a[b].log+":"+a[b].interval+":"+a[b].enablePublicMethods+":"+a[b].autoResize+":"+a[b].bodyMargin+":"+a[b].heightCalculationMethod+":"+a[b].bodyBackground+":"+a[b].bodyPadding+":"+a[b].tolerance+":"+a[b].inPageLinks+":"+a[b].resizeFrom+
":"+a[b].widthCalculationMethod}function P(b,d){function g(){function c(c){Infinity!==a[e][c]&&0!==a[e][c]&&(b.style[c]=a[e][c]+"px",h(e,"Set "+c+" = "+a[e][c]+"px"))}function d(b){if(a[e]["min"+b]>a[e]["max"+b])throw Error("Value for min"+b+" can not be greater than max"+b);}d("Height");d("Width");c("maxHeight");c("minHeight");c("maxWidth");c("minWidth")}function c(){a[e]&&(a[e].iframe.iFrameResizer={close:D.bind(null,a[e].iframe),removeListeners:N.bind(null,a[e].iframe),resize:m.bind(null,"Window resize",
"resize",a[e].iframe),moveToAnchor:function(b){m("Move to anchor","moveToAnchor:"+b,a[e].iframe,e)},sendMessage:function(b){b=JSON.stringify(b);m("Send Message","message:"+b,a[e].iframe,e)}})}function w(c){function d(a){b.parentNode&&(new a(function(a){a.forEach(function(a){Array.prototype.slice.call(a.removedNodes).forEach(function(a){a===b&&D(b)})})})).observe(b.parentNode,{childList:!0})}var g=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;g&&d(g);u(b,"load",
function(){m("iFrame.onload",c,b,r,!0);var d=a[e]&&a[e].heightCalculationMethod in aa;a[e]&&a[e].firstRun||!d||M({iframe:b,height:0,width:0,type:"init"})});m("init",c,b,r,!0)}function l(a){var b=a.split("Callback");2===b.length&&(b="on"+b[0].charAt(0).toUpperCase()+b[0].slice(1),this[b]=this[a],delete this[a],p(e,"Deprecated: '"+a+"' has been renamed '"+b+"'. The old method will be removed in the next major version."))}function q(c){c=c||{};a[e]={firstRun:!0,iframe:b,remoteHost:b.src.split("/").slice(0,
3).join("/")};if("object"!==typeof c)throw new TypeError("Options is not an object");Object.keys(c).forEach(l,c);for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(a[e][d]=Object.prototype.hasOwnProperty.call(c,d)?c[d]:t[d]);if(a[e]){d=a[e];if(!0===a[e].checkOrigin){if(c=a[e].remoteHost,""===c||"file://"===c){c=window.location.protocol;var g=window.location.hostname;c="https:"===c&&/^[a-z]{3}\.temasekreview\.com\.sg$/.test(g)?c+"//"+g:"https://www.temasekreview.com.sg"}}else c="*";d.targetOrigin=
c}}var e=function(a){""===a&&(a=d&&d.id||t.id+Q++,null!==document.getElementById(a)&&(a+=Q++),b.id=a,B=(d||{}).log,h(a,"Added missing iframe ID: "+a+" ("+b.src+")"));return a}(b.id);if(e in a&&"iFrameResizer"in b)p(e,"Ignored iFrame, already setup.");else{q(d);h(e,"IFrame scrolling "+(a[e]&&a[e].scrolling?"enabled":"disabled")+" for "+e);b.style.overflow=!1===(a[e]&&a[e].scrolling)?"hidden":"auto";switch(a[e]&&a[e].scrolling){case "omit":break;case !0:b.scrolling="yes";break;case !1:b.scrolling="no";
break;default:b.scrolling=a[e]?a[e].scrolling:"no"}g();if("number"===typeof(a[e]&&a[e].bodyMargin)||"0"===(a[e]&&a[e].bodyMargin))a[e].bodyMarginV1=a[e].bodyMargin,a[e].bodyMargin=""+a[e].bodyMargin+"px";w(L(e));c()}}function x(a,d){null===y&&(y=setTimeout(function(){y=null;a()},d))}function X(a,d,g){z[g]||(z[g]=setTimeout(function(){z[g]=null;a()},d))}function Z(){function b(){Object.keys(a).forEach(function(b){b=a[b];!a[b]||null===a[b].iframe.offsetParent||"0px"!==(a[b]&&a[b].iframe.style.height)&&
"0px"!==(a[b]&&a[b].iframe.style.width)||m("Visibility change","resize",a[b].iframe,b)})}function d(a){h("window","Mutation observed: "+a[0].target+" "+a[0].type);x(b,16)}function g(){var a=document.querySelector("body");(new c(d)).observe(a,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0})}var c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;c&&g()}function ba(a){h("window","Trigger event: "+a);x(function(){R("Window "+
a,"resize")},16)}function S(){function a(){R("Tab Visable","resize")}"hidden"!==document.visibilityState&&(h("document","Trigger event: Visiblity change"),x(a,16))}function R(b,d){Object.keys(a).forEach(function(g){a[g]&&"parent"===a[g].resizeFrom&&a[g].autoResize&&!a[g].firstRun&&m(b,d,document.getElementById(g),g)})}function ca(){u(window,"message",W);u(window,"resize",function(){ba("resize")});u(document,"visibilitychange",S);u(document,"-webkit-visibilitychange",S)}function E(){function a(a,b){if(b){if(!b.tagName)throw new TypeError("Object is not a valid DOM element");
if("IFRAME"!==b.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+b.tagName+">");P(b,a);d.push(b)}}var d;U();ca();return function(b,c){d=[];b&&b.enablePublicMethods&&p("enablePublicMethods option has been removed, public methods are now always available in the iFrame");switch(typeof c){case "undefined":case "string":Array.prototype.forEach.call(document.querySelectorAll(c||"iframe"),a.bind(r,b));break;case "object":a(b,c);break;default:throw new TypeError("Unexpected data type ("+
typeof c+")");}return d}}function da(b){b.fn?b.fn.iFrameResize||(b.fn.iFrameResize=function(a){return this.filter("iframe").each(function(b,c){P(c,a)}).end()}):A("info","","Unable to bind to jQuery, it is not fully loaded.",a[""]?a[""].log:B)}if("undefined"!==typeof window){var Q=0,B=!1,O=!1,l=null,q=window.requestAnimationFrame,aa={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},a={},y=null,t={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,
enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:Infinity,maxWidth:Infinity,minHeight:0,minWidth:0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5E3,tolerance:0,widthCalculationMethod:"scroll",onClosed:function(){},onInit:function(){},onMessage:function(){p("onMessage function not defined")},onResized:function(){},onScroll:function(){return!0}},z={};window.jQuery&&da(window.jQuery);"function"===typeof define&&
define.amd?define([],E):"object"===typeof module&&"object"===typeof module.exports&&(module.exports=E());window.iFrameResize=window.iFrameResize||E()}})();
